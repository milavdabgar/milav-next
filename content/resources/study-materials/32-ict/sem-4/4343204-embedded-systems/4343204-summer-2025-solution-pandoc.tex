\documentclass[10pt,a4paper]{article}
\input{../../../../../../latex-templates/gtu-solutions/preamble.tex}
\input{../../../../../../latex-templates/gtu-solutions/english-boxes.tex}

\begin{document}

\begin{center}
{\Huge\bfseries\color{headcolor} Subject Name Solutions}\\[5pt]
{\LARGE 4343204 -- Summer 2025}\\[3pt]
{\large Semester 1 Study Material}\\[3pt]
{\normalsize\textit{Detailed Solutions and Explanations}}
\end{center}

\vspace{10pt}

\subsection*{Question 1(a) [3 marks]}\label{q1a}

\textbf{Discuss characteristics of real time operating system.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{RTOS Characteristics}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Characteristic & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Deterministic} & Predictable response times \\
\textbf{Time Constraints} & Hard and soft deadlines \\
\textbf{Priority Scheduling} & Task execution by priority \\
\textbf{Resource Management} & Efficient memory and CPU usage \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Deterministic behavior}: System responds within guaranteed
  time limits
\item
  \textbf{Multitasking support}: Multiple tasks execute concurrently
  with priority
\item
  \textbf{Interrupt handling}: Fast response to external events
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``RTOS Delivers Tasks Properly''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 1(b) [4 marks]}\label{q1b}

\textbf{Describe AVR I/O port registers.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{AVR I/O Port Registers}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Register & Function & Access \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{DDRx} & Data Direction Register & Read/Write \\
\textbf{PORTx} & Port Output Register & Read/Write \\
\textbf{PINx} & Port Input Register & Read Only \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{DDRx register}: Controls pin direction (0=input, 1=output)
\item
  \textbf{PORTx register}: Sets output values or enables pull-up
  resistors
\item
  \textbf{PINx register}: Reads current pin states for input operations
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Direction, Port, Pin - DPP''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 1(c) [7 marks]}\label{q1c}

\textbf{Compare different AVR microcontrollers and What are the factors
to be considered in selecting the microcontroller for embedded system?}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{AVR Microcontroller Comparison}
\vspace{-10pt}
\begin{longtable}[]{@{}llll@{}}
\toprule\noalign{}
Feature & ATmega8 & ATmega32 & ATmega128 \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Flash Memory} & 8KB & 32KB & 128KB \\
\textbf{SRAM} & 1KB & 2KB & 4KB \\
\textbf{EEPROM} & 512B & 1KB & 4KB \\
\textbf{I/O Pins} & 23 & 32 & 53 \\
\textbf{Timers} & 3 & 3 & 4 \\
\end{longtable}
}

\textbf{Selection Factors:}

\begin{itemize}
\tightlist
\item
  \textbf{Processing speed}: Clock frequency requirements for
  application
\item
  \textbf{Memory requirements}: Program and data storage needs
\item
  \textbf{I/O requirements}: Number of pins needed for interfacing
\item
  \textbf{Power consumption}: Battery life considerations for portable
  devices
\item
  \textbf{Cost factor}: Budget constraints and volume requirements
\item
  \textbf{Development tools}: Availability of compilers and debuggers
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Speed, Memory, I/O, Power, Cost, Tools - SMIPCT''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 1(c OR) [7
marks]}\label{question-1c-or-7-marks}

\textbf{Draw and explain general block diagram of embedded system.}

\begin{solutionbox}

\textbf{Diagram:}

\begin{lstlisting}
    +------------------+    +------------------+    +------------------+
    |   Input Devices  |    |  Microcontroller |    |  Output Devices  |
    |                  |--->|                  |--->|                  |
    | • Sensors        |    | • CPU            |    | • Actuators      |
    | • Switches       |    | • Memory         |    | • Display        |
    | • Keypad         |    | • I/O Ports      |    | • LEDs           |
    +------------------+    +------------------+    +------------------+
                                      |
                                      v
                            +------------------+
                            |  Power Supply    |
                            |                  |
                            | • Voltage Reg.   |
                            | • Battery        |
                            +------------------+
\end{lstlisting}

\textbf{Components:}

\begin{itemize}
\tightlist
\item
  \textbf{Input section}: Sensors and switches provide data to system
\item
  \textbf{Processing unit}: Microcontroller executes program and
  controls operations
\item
  \textbf{Output section}: Displays results and controls external
  devices
\item
  \textbf{Power supply}: Provides regulated power to all components
\item
  \textbf{Memory}: Stores program code and data permanently
\item
  \textbf{Communication}: Interfaces with external systems via
  serial/wireless
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Input, Process, Output, Power, Memory,
Communication - IPOPMC''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(a) [3 marks]}\label{q2a}

\textbf{Compare SRAM with EEPROM of ATMega32.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{SRAM vs EEPROM Comparison}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Parameter & SRAM & EEPROM \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Size} & 2KB & 1KB \\
\textbf{Volatility} & Volatile & Non-volatile \\
\textbf{Access Speed} & Fast & Slow \\
\textbf{Write Cycles} & Unlimited & 100,000 cycles \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Data retention}: SRAM loses data on power-off, EEPROM retains
  data
\item
  \textbf{Usage purpose}: SRAM for variables, EEPROM for configuration
  data
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``SRAM is Fast but Forgets, EEPROM Endures''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(b) [4 marks]}\label{q2b}

\textbf{List Timer/counter 0 operation mode and explain anyone.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{Timer0 Operation Modes}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Mode & Name & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{0} & Normal & Count up to 0xFF, overflow \\
\textbf{1} & PWM Phase Correct & PWM with phase correction \\
\textbf{2} & CTC & Clear Timer on Compare \\
\textbf{3} & Fast PWM & High frequency PWM \\
\end{longtable}
}

\textbf{Normal Mode Explanation:}

\begin{itemize}
\tightlist
\item
  \textbf{Counter operation}: Counts from 0x00 to 0xFF continuously
\item
  \textbf{Overflow flag}: TOV0 flag set when counter overflows to 0x00
\item
  \textbf{Interrupt generation}: Can generate interrupt on overflow
  condition
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Normal Counts, PWM Pulses, CTC Clears''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(c) [7 marks]}\label{q2c}

\textbf{With a sketch, identify and write function of each pins of
ATmega32.}

\begin{solutionbox}

\textbf{Diagram: ATmega32 Pin Configuration}

\begin{lstlisting}
                    ATmega32
                 +--------------------+
    (XCK/T0) PB0 |1                 40| PA0 (ADC0)
        (T1) PB1 |2                 39| PA1 (ADC1)
 (INT2/AIN0) PB2 |3                 38| PA2 (ADC2)
  (OC0/AIN1) PB3 |4                 37| PA3 (ADC3)
        (SS) PB4 |5                 36| PA4 (ADC4)
      (MOSI) PB5 |6                 35| PA5 (ADC5)
      (MISO) PB6 |7                 34| PA6 (ADC6)
       (SCK) PB7 |8                 33| PA7 (ADC7)
             RST |9                 32| AREF
             VCC |10                31| GND
             GND |11                30| AVCC
           XTAL2 |12                29| PC7 (TOSC2)
           XTAL1 |13                28| PC6 (TOSC1)
       (RXD) PD0 |14                27| PC5 (TDI)
       (TXD) PD1 |15                26| PC4 (TDO)
      (INT0) PD2 |16                25| PC3 (TMS)
      (INT1) PD3 |17                24| PC2 (TCK)
      (OC1B) PD4 |18                23| PC1 (SDA)
      (OC1A) PD5 |19                22| PC0 (SCL)
      (ICP1) PD6 |20                21| PD7 (OC2)
                 +--------------------+
\end{lstlisting}

\textbf{Pin Functions:}

\begin{itemize}
\tightlist
\item
  \textbf{Port A}: 8-bit ADC input pins (PA0-PA7)
\item
  \textbf{Port B}: SPI communication and timer functions
\item
  \textbf{Port C}: JTAG interface and I2C communication
\item
  \textbf{Port D}: UART communication and external interrupts
\item
  \textbf{Power pins}: VCC, GND, AVCC for analog supply
\item
  \textbf{Crystal pins}: XTAL1, XTAL2 for external oscillator
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Analog-A, Bus-B, Communication-C, Data-D''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(a OR) [3
marks]}\label{question-2a-or-3-marks}

\textbf{Explain data memory organization of ATmega32.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{ATmega32 Memory Organization}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Memory Type & Address Range & Size \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Registers} & 0x00-0x1F & 32 bytes \\
\textbf{I/O Registers} & 0x20-0x5F & 64 bytes \\
\textbf{Internal SRAM} & 0x60-0x25F & 2048 bytes \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{General purpose registers}: R0-R31 for arithmetic operations
\item
  \textbf{I/O memory space}: Control registers for peripherals
\item
  \textbf{Internal SRAM}: Variable storage during program execution
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Registers, I/O, SRAM - RIS''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(b OR) [4
marks]}\label{question-2b-or-4-marks}

\textbf{Draw TIFR and TCCR registers of timer/counter 0.}

\begin{solutionbox}

\textbf{Diagram: Timer0 Registers}

\begin{lstlisting}
TIFR (Timer Interrupt Flag Register)
+---+---+---+---+---+---+---+---+
| - | - | - | - | - |OCF2|TOV2|TOV0|OCF0|TOV1|OCF1A|ICF1|OCF1B|
+---+---+---+---+---+---+---+---+
  7   6   5   4   3   2   1   0

TCCR0 (Timer/Counter Control Register 0)
+---+---+---+---+---+---+---+---+
|FOC0|WGM00|COM01|COM00|WGM01| - |CS02|CS01|CS00|
+---+---+---+---+---+---+---+---+
  7   6    5    4    3   2   1   0
\end{lstlisting}

\textbf{Bit Functions:}

\begin{itemize}
\tightlist
\item
  \textbf{TOV0}: Timer0 overflow flag bit
\item
  \textbf{OCF0}: Timer0 output compare match flag
\item
  \textbf{CS02:CS00}: Clock select bits for prescaler
\item
  \textbf{WGM01:WGM00}: Waveform generation mode bits
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``TIFR shows Flags, TCCR Controls Clock''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(c OR) [7
marks]}\label{question-2c-or-7-marks}

\textbf{Draw and explain general block diagram of AVR microcontroller.}

\begin{solutionbox}

\textbf{Diagram: AVR Architecture}

\begin{lstlisting}
    +------------------+    +------------------+
    |   Program Memory |    |   Data Memory    |
    |     (Flash)      |    |     (SRAM)       |
    +------------------+    +------------------+
             |                       |
             v                       v
    +----------------------------------------+
    |              CPU Core                  |
    |  +----------+  +----------+            |
    |  |   ALU    |  | Register |            |
    |  |          |  |   File   |            |
    |  +----------+  +----------+            |
    +----------------------------------------+
             |
             v
    +------------------+    +------------------+
    |   I/O Registers  |    |   Peripherals    |
    |                  |    | • Timers         |
    |                  |    | • UART           |
    |                  |    | • ADC            |
    +------------------+    +------------------+
\end{lstlisting}

\textbf{Components:}

\begin{itemize}
\tightlist
\item
  \textbf{CPU core}: Executes instructions and controls system operation
\item
  \textbf{Program memory}: Stores application code in non-volatile flash
\item
  \textbf{Data memory}: Temporary storage for variables and stack
\item
  \textbf{ALU}: Performs arithmetic and logical operations
\item
  \textbf{Register file}: 32 general-purpose working registers
\item
  \textbf{I/O system}: Interfaces with external hardware components
\item
  \textbf{Peripherals}: Built-in modules like timers, UART, ADC
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``CPU Controls Program, Data, I/O, Peripherals -
CPDIP''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(a) [3 marks]}\label{q3a}

\textbf{Write an AVR C program to toggle all the bits of Port B
continuously with a 10 ms delay.}

\begin{solutionbox}

\begin{lstlisting}[language=C]
#include <avr/io.h>
#include <util/delay.h>

int main()
{
    DDRB = 0xFF;        // Set Port B as output
    
    while(1)
    {
        PORTB = 0xFF;    // Set all bits high
        _delay_ms(10);   // 10ms delay
        PORTB = 0x00;    // Set all bits low  
        _delay_ms(10);   // 10ms delay
    }
}
\end{lstlisting}

\textbf{Key Points:}

\begin{itemize}
\tightlist
\item
  \textbf{DDRB = 0xFF}: Configures all Port B pins as outputs
\item
  \textbf{PORTB toggle}: Alternates between 0xFF and 0x00
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``DDR Direction, PORT Output''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(b) [4 marks]}\label{q3b}

\textbf{Explain function of MAX232.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{MAX232 Functions}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Function & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Level Conversion} & TTL to RS232 voltage levels \\
\textbf{Charge Pump} & Generates \pm10V from +5V supply \\
\textbf{Line Drivers} & Two transmit drivers \\
\textbf{Line Receivers} & Two receive receivers \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Voltage conversion}: Converts 0-5V TTL to \pm12V RS232 levels
\item
  \textbf{Serial communication}: Enables microcontroller to communicate
  with PC
\item
  \textbf{Dual channel}: Supports two-way communication simultaneously
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``MAX232 Makes Microcontroller Meet PC''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(c) [7 marks]}\label{q3c}

\textbf{Write AVR C program to toggle all the bits of PORTC continuously
with some delay. Use timer 0, mode 0 and no prescalar options to
generate delay.}

\begin{solutionbox}

\begin{lstlisting}[language=C]
#include <avr/io.h>

void timer0_delay()
{
    TCNT0 = 0;          // Initialize counter
    TCCR0 = 0x01;       // No prescaler, normal mode
    while(!(TIFR & (1<<TOV0))); // Wait for overflow
    TIFR |= (1<<TOV0);  // Clear overflow flag
    TCCR0 = 0;          // Stop timer
}

int main()
{
    DDRC = 0xFF;        // Port C as output
    
    while(1)
    {
        PORTC = 0xFF;    // All bits high
        for(int i=0; i<100; i++)
            timer0_delay(); // Multiple delays
            
        PORTC = 0x00;    // All bits low
        for(int i=0; i<100; i++)
            timer0_delay(); // Multiple delays
    }
}
\end{lstlisting}

\textbf{Key Features:}

\begin{itemize}
\tightlist
\item
  \textbf{Timer0 normal mode}: Counts from 0 to 255 then overflows
\item
  \textbf{No prescaler}: Timer runs at system clock speed
\item
  \textbf{Overflow detection}: TOV0 flag indicates timer overflow
\item
  \textbf{Delay generation}: Multiple timer cycles create visible delay
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Timer Counts, Overflow Flags, Generate Delays''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(a OR) [3
marks]}\label{question-3a-or-3-marks}

\textbf{Write AVR C program to store \#30h into location 0X011F of
EEPROM.}

\begin{solutionbox}

\begin{lstlisting}[language=C]
#include <avr/io.h>
#include <avr/eeprom.h>

int main()
{
    eeprom_write_byte((uint8_t*)0x011F, 0x30);
    return 0;
}
\end{lstlisting}

\textbf{Alternative Method:}

\begin{lstlisting}[language=C]
#include <avr/io.h>

int main()
{
    while(EECR & (1<<EEWE));    // Wait for previous write
    EEAR = 0x011F;              // Set address
    EEDR = 0x30;                // Set data
    EECR |= (1<<EEMWE);         // Master write enable
    EECR |= (1<<EEWE);          // Write enable
}
\end{lstlisting}

\end{solutionbox}
\begin{mnemonicbox}
``Address, Data, Master, Write - ADMW''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(b OR) [4
marks]}\label{question-3b-or-4-marks}

\textbf{Discuss different data types for programming AVR in C.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{AVR C Data Types}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Data Type & Size & Range \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{char} & 1 byte & -128 to 127 \\
\textbf{unsigned char} & 1 byte & 0 to 255 \\
\textbf{int} & 2 bytes & -32768 to 32767 \\
\textbf{unsigned int} & 2 bytes & 0 to 65535 \\
\textbf{long} & 4 bytes & -2^{3}^{1} to 2^{3}^{1}-1 \\
\textbf{float} & 4 bytes & IEEE 754 format \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Memory efficiency}: Choose smallest suitable data type
\item
  \textbf{Unsigned types}: Use when negative values not needed
\item
  \textbf{Integer arithmetic}: Faster than floating-point operations
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Choose Correct Size for Memory Efficiency''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(c OR) [7
marks]}\label{question-3c-or-7-marks}

\textbf{Write AVR C programs for serial data transmission.}

\begin{solutionbox}

\begin{lstlisting}[language=C]
#include <avr/io.h>

void uart_init(unsigned int baud)
{
    UBRRH = (unsigned char)(baud>>8);
    UBRRL = (unsigned char)baud;
    UCSRB = (1<<TXEN);          // Enable transmitter
    UCSRC = (1<<URSEL)|(3<<UCSZ0); // 8-bit data
}

void uart_transmit(unsigned char data)
{
    while(!(UCSRA & (1<<UDRE))); // Wait for empty buffer
    UDR = data;                  // Send data
}

void uart_send_string(char *str)
{
    while(*str)
    {
        uart_transmit(*str++);
    }
}

int main()
{
    uart_init(51);              // 9600 baud at 8MHz
    
    while(1)
    {
        uart_send_string("Hello World\r\n");
        for(long i=0; i<100000; i++); // Delay
    }
}
\end{lstlisting}

\textbf{Key Components:}

\begin{itemize}
\tightlist
\item
  \textbf{Baud rate setting}: UBRR registers set communication speed
\item
  \textbf{Transmit enable}: TXEN bit enables UART transmitter
\item
  \textbf{Data transmission}: UDR register holds data to transmit
\item
  \textbf{Buffer check}: UDRE flag indicates transmit buffer empty
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Init, Enable, Check, Transmit - IECT''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(a) [3 marks]}\label{q4a}

\textbf{Explain ADMUX register.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{ADMUX Register Bits}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bit & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{REFS1:0} & Reference Select & Voltage reference selection \\
\textbf{ADLAR} & Left Adjust & Result left adjustment \\
\textbf{MUX4:0} & Channel Select & ADC input channel selection \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Reference voltage}: Selects internal/external voltage
  reference
\item
  \textbf{Result format}: ADLAR bit adjusts 10-bit result alignment
\item
  \textbf{Channel selection}: MUX bits choose which ADC pin to read
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Reference, Adjust, Channel - RAC''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(b) [4 marks]}\label{q4b}

\textbf{Draw and explain Interfacing Relay with ATmega32.}

\begin{solutionbox}

\textbf{Diagram: Relay Interfacing}

\begin{lstlisting}
ATmega32                    Relay Circuit
                         
  PA0 ----+                +12V
          |                 |
          R            [Relay Coil]
          |                 |
          |     +-----+     |
          +-----|  T  |-----+
                | NPN |
                +-----+
                  |
                 GND
                 
T = BC547 Transistor
R = 1K Resistor
\end{lstlisting}

\textbf{Components:}

\begin{itemize}
\tightlist
\item
  \textbf{Transistor switch}: BC547 NPN transistor acts as electronic
  switch
\item
  \textbf{Base resistor}: 1KΩ limits base current from microcontroller
\item
  \textbf{Relay coil}: 12V relay operates external high-power devices
\item
  \textbf{Protection diode}: Freewheeling diode protects from back EMF
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Micro Controls Transistor Controls Relay''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(c) [7 marks]}\label{q4c}

\textbf{Draw and explain TWI registers in AVR.}

\begin{solutionbox}

\textbf{Diagram: TWI Register Structure}

\begin{lstlisting}
TWCR (TWI Control Register)
+-----+----+-----+-----+----+----+---+----+
|TWINT|TWEA|TWSTA|TWSTO|TWWC|TWEN| - |TWIE|
+-----+----+-----+-----+----+----+---+----+
 7      6     5     4    3     2   1    0

TWSR (TWI Status Register)  
+----+----+----+----+----+---+-----+-----+
|TWS7|TWS6|TWS5|TWS4|TWS3| - |TWPS1|TWPS0|
+----+----+----+----+----+---+-----+-----+
 7     6     5    4    3   2    1     0

TWDR (TWI Data Register)
+----+----+----+----+----+----+----+----+
|TWD7|TWD6|TWD5|TWD4|TWD3|TWD2|TWD1|TWD0|
+----+----+----+----+----+----+----+----+
 7     6     5    4    3    2    1    0
\end{lstlisting}

\textbf{Register Functions:}

\begin{itemize}
\tightlist
\item
  \textbf{TWCR}: Controls TWI operation and interrupt handling
\item
  \textbf{TWSR}: Provides status information and prescaler setting
\item
  \textbf{TWDR}: Holds data for transmission/reception
\item
  \textbf{TWAR}: Sets slave address when operating as slave
\item
  \textbf{TWBR}: Sets bit rate for TWI communication
\item
  \textbf{TWINT}: Interrupt flag cleared by writing 1
\item
  \textbf{Start/Stop}: TWSTA and TWSTO control I2C conditions
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Control, Status, Data, Address, Bit Rate - CSDAB''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(a OR) [3
marks]}\label{question-4a-or-3-marks}

\textbf{Explain ADCSRA register.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{ADCSRA Register Bits}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bit & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{ADEN} & ADC Enable & Enables ADC module \\
\textbf{ADSC} & Start Conversion & Starts ADC conversion \\
\textbf{ADATE} & Auto Trigger & Enables auto trigger mode \\
\textbf{ADIF} & Interrupt Flag & ADC conversion complete flag \\
\textbf{ADIE} & Interrupt Enable & Enables ADC interrupt \\
\textbf{ADPS2:0} & Prescaler & Sets ADC clock prescaler \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{ADC control}: ADEN enables ADC, ADSC starts conversion\\
\item
  \textbf{Interrupt system}: ADIF flag set when conversion complete
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Enable, Start, Trigger, Interrupt, Prescale -
ESTIP''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(b OR) [4
marks]}\label{question-4b-or-4-marks}

\textbf{Draw and explain interfacing of LM35 with ATmega32.}

\begin{solutionbox}

\textbf{Diagram: LM35 Interfacing}

\begin{lstlisting}
    LM35                 ATmega32
                         
   +5V ----+              
           |              
         [LM35]          
           |              
   GND ----+              
           |              
   Vout ---+------------- PA0 (ADC0)
                         
   Temperature Sensor
   Output: 10mV/^\circC
\end{lstlisting}

\textbf{Connection Details:}

\begin{itemize}
\tightlist
\item
  \textbf{Power supply}: LM35 requires +5V and ground connections
\item
  \textbf{Output voltage}: Produces 10mV per degree Celsius
\item
  \textbf{ADC input}: Connect LM35 output to ADC channel (PA0)
\item
  \textbf{Temperature calculation}: ^\circC = (ADC\_Value \times 5000mV) / (1024 \times
  10mV)
\end{itemize}

\textbf{Code Example:}

\begin{lstlisting}[language=C]
float temp = (adc_read() * 5.0 * 100.0) / 1024.0;
\end{lstlisting}

\end{solutionbox}
\begin{mnemonicbox}
``LM35 gives 10mV per degree''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(c OR) [7
marks]}\label{question-4c-or-7-marks}

\textbf{Draw and explain interfacing of multiple 7-segment displays
using MAX7221 with ATmega32.}

\begin{solutionbox}

\textbf{Diagram: MAX7221 Interfacing}

\begin{lstlisting}
ATmega32                MAX7221              7-Segment Displays

PB5(MOSI) ------------- DIN                   DIG0 ---- Display 1
PB7(SCK)  ------------- CLK                   DIG1 ---- Display 2  
PB4(SS)   ------------- CS                    DIG2 ---- Display 3
                                              DIG3 ---- Display 4
          +5V --------- VCC                   DIG4 ---- Display 5
          GND --------- GND                   DIG5 ---- Display 6
                                              DIG6 ---- Display 7
                        SEGA ---- Common segments
                        SEGB     to all displays
                        SEGC
                        SEGD
                        SEGE
                        SEGF
                        SEGG
                        SEGDP
\end{lstlisting}

\textbf{Features:}

\begin{itemize}
\tightlist
\item
  \textbf{SPI communication}: Uses serial peripheral interface for
  control
\item
  \textbf{Multiple displays}: Controls up to 8 seven-segment displays
\item
  \textbf{Automatic scanning}: MAX7221 handles multiplexing
  automatically\\
\item
  \textbf{Brightness control}: Software-controlled brightness levels
\item
  \textbf{Decode mode}: Built-in BCD to 7-segment decoder
\item
  \textbf{Low component count}: Reduces external components needed
\end{itemize}

\textbf{Key Registers:}

\begin{itemize}
\tightlist
\item
  \textbf{Decode mode register}: Enables/disables BCD decoding
\item
  \textbf{Intensity register}: Controls display brightness
\item
  \textbf{Scan limit register}: Sets number of active displays
\item
  \textbf{Shutdown register}: Normal operation or shutdown mode
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``SPI Sends Serial Data to Multiple Displays''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(a) [3 marks]}\label{q5a}

\textbf{Explain SPCR register.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{SPCR Register Bits}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bit & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{SPIE} & Interrupt Enable & Enables SPI interrupt \\
\textbf{SPE} & SPI Enable & Enables SPI module \\
\textbf{DORD} & Data Order & LSB/MSB first selection \\
\textbf{MSTR} & Master/Slave & Selects master or slave mode \\
\textbf{CPOL} & Clock Polarity & Clock idle state selection \\
\textbf{CPHA} & Clock Phase & Clock edge for data sampling \\
\textbf{SPR1:0} & Clock Rate & SPI clock rate selection \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{SPI enable}: SPE bit must be set to enable SPI functionality
\item
  \textbf{Master mode}: MSTR bit determines if device is master or slave
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Interrupt, Enable, Data, Master, Clock settings -
IEDMC''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(b) [4 marks]}\label{q5b}

\textbf{Draw circuit diagram to interface DC motor with ATmega32 using
L293D motor driver.}

\begin{solutionbox}

\textbf{Diagram: DC Motor Interfacing}

\begin{lstlisting}
ATmega32              L293D                DC Motor

PA0 ----------- IN1    OUT1 ----------+
PA1 ----------- IN2    OUT2 ----------+    [Motor]
                                      |      M
+5V ----------- VCC1   VCC2 --------- +12V  |
GND ----------- GND    GND  --------- GND   |
PA2 ----------- EN1                         |
                                            |
               Input Logic Table:           |
               IN1  IN2  Motor              |
                0    0   Stop               |
                0    1   CCW                |
                1    0   CW                 |
                1    1   Brake              |
\end{lstlisting}

\textbf{Components:}

\begin{itemize}
\tightlist
\item
  \textbf{L293D driver}: Provides current amplification for motor
  control
\item
  \textbf{Power supplies}: +5V for logic, +12V for motor power
\item
  \textbf{Control signals}: IN1, IN2 determine motor direction
\item
  \textbf{Enable pin}: EN1 controls motor on/off and speed (PWM)
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Logic controls Direction, Enable controls Speed''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(c) [7 marks]}\label{q5c}

\textbf{Explain IoT based Home Automation System.}

\begin{solutionbox}

\textbf{Diagram: IoT Home Automation System}

\begin{lstlisting}
    Internet Cloud
          |
    +----------+
    |  Router  |
    +----------+
          |
    +----------+      +----------+      +----------+
    |   ESP32  |------|ATmega32  |------| Devices  |
    | WiFi MCU |      |Main MCU  |      |• Lights  |
    +----------+      +----------+      |• Fan     |
          |                  |          |• AC      |
    +----------+      +----------+      |• Security|
    |   App    |      | Sensors  |      +----------+
    |Smartphone|      |• Temp    |
    +----------+      |• Motion  |
                      |• LDR     |
                      +----------+
\end{lstlisting}

\textbf{System Components:}

\begin{itemize}
\tightlist
\item
  \textbf{Internet connectivity}: WiFi module connects system to
  internet
\item
  \textbf{Mobile application}: User interface for remote control and
  monitoring
\item
  \textbf{Sensor network}: Temperature, motion, light sensors for
  automation
\item
  \textbf{Control devices}: Relays control home appliances and lights
\item
  \textbf{Central controller}: Microcontroller processes commands and
  sensor data
\item
  \textbf{Cloud services}: Store data and enable remote access
\end{itemize}

\textbf{Features:}

\begin{itemize}
\tightlist
\item
  \textbf{Remote control}: Control appliances from anywhere via internet
\item
  \textbf{Automation}: Automatic control based on sensor readings
\item
  \textbf{Energy saving}: Smart scheduling reduces power consumption
\item
  \textbf{Security monitoring}: Motion sensors and cameras for safety
\item
  \textbf{Data logging}: Historical data storage for analysis
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Internet connects Phones to Home Devices - IPHD''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(a OR) [3
marks]}\label{question-5a-or-3-marks}

\textbf{Explain SPSR register.}

\begin{solutionbox}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{SPSR Register Bits}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bit & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{SPIF} & Interrupt Flag & SPI transfer complete flag \\
\textbf{WCOL} & Write Collision & Data collision error flag \\
\textbf{SPI2X} & Double Speed & Doubles SPI clock rate \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Transfer complete}: SPIF flag indicates SPI transmission
  finished
\item
  \textbf{Collision detection}: WCOL flag shows write collision occurred
\item
  \textbf{Speed control}: SPI2X doubles communication speed when set
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Flag, Collision, Speed - FCS''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(b OR) [4
marks]}\label{question-5b-or-4-marks}

\textbf{Draw and explain pin diagram of L293D motor driver IC.}

\begin{solutionbox}

\textbf{Diagram: L293D Pin Configuration}

\begin{lstlisting}
      L293D (16-pin DIP)
    +--------------------+
EN1 |1                 16| VCC1
IN1 |2                 15| IN4  
OUT1|3                 14| OUT4
GND |4                 13| GND
GND |5                 12| GND
OUT2|6                 11| OUT3
IN2 |7                 10| IN3
VCC2|8                  9| EN2
    +--------------------+
\end{lstlisting}

\textbf{Pin Functions:}

\begin{itemize}
\tightlist
\item
  \textbf{Enable pins (EN1, EN2)}: Control motor on/off and speed via
  PWM
\item
  \textbf{Input pins (IN1-IN4)}: Logic inputs from microcontroller
\item
  \textbf{Output pins (OUT1-OUT4)}: High current outputs to motors
\item
  \textbf{Power supply (VCC1)}: +5V logic supply for IC operation
\item
  \textbf{Motor supply (VCC2)}: +12V supply for motor power
\item
  \textbf{Ground pins}: Multiple ground connections for heat dissipation
\end{itemize}

\textbf{Features:}

\begin{itemize}
\tightlist
\item
  \textbf{Dual H-bridge}: Can control two DC motors simultaneously
\item
  \textbf{Current capacity}: 600mA per channel, 1.2A peak
\item
  \textbf{Protection}: Built-in flyback diodes for motor protection
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Enable, Input, Output, Power - EIOP''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(c OR) [7
marks]}\label{question-5c-or-7-marks}

\textbf{Explain Motorised Control Robotics System.}

\begin{solutionbox}

\textbf{Diagram: Robotics Control System}

\begin{lstlisting}
    +----------------+      +----------------+      +----------------+
    |   Sensors      |      | Microcontroller|      |   Actuators    |
    |                |----->|                |----->|                |
    | • Ultrasonic   |      | • ATmega32     |      | • DC Motors    |
    | • IR Sensor    |      | • Processing   |      | • Servo Motors |
    | • Gyroscope    |      | • Decision     |      | • Stepper      |
    | • Camera       |      | • Control      |      | • Gripper      |
    +----------------+      +----------------+      +----------------+
             |                        |                        |
             v                        v                        v
    +----------------+      +----------------+      +----------------+
    |  Communication |      |   Power Supply |      |   Feedback     |
    |                |      |                |      |                |
    | • Bluetooth    |      | • Battery      |      | • Encoders     |
    | • WiFi         |      | • Regulators   |      | • Position     |
    | • RF Module    |      | • Protection   |      | • Speed        |
    +----------------+      +----------------+      +----------------+
\end{lstlisting}

\textbf{System Components:}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{Robotics System Elements}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Component & Function & Examples \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Sensors} & Environment sensing & Ultrasonic, IR, Camera \\
\textbf{Controller} & Decision making & ATmega32, Arduino \\
\textbf{Actuators} & Physical movement & Motors, Servos \\
\textbf{Communication} & Remote control & Bluetooth, WiFi \\
\textbf{Power} & Energy supply & Battery, Regulators \\
\textbf{Feedback} & Position sensing & Encoders, Gyroscope \\
\end{longtable}
}

\textbf{Control Algorithm:}

\begin{itemize}
\tightlist
\item
  \textbf{Sense}: Collect data from environment using sensors
\item
  \textbf{Process}: Analyze sensor data and make decisions
\item
  \textbf{Act}: Control motors and actuators based on decisions
\item
  \textbf{Feedback}: Monitor actual movement and adjust control
\item
  \textbf{Communicate}: Send status and receive commands remotely
\end{itemize}

\textbf{Applications:}

\begin{itemize}
\tightlist
\item
  \textbf{Autonomous navigation}: Robot moves independently using
  sensors
\item
  \textbf{Object manipulation}: Gripper controlled for pick and place
  tasks
\item
  \textbf{Remote operation}: Manual control via wireless communication
\item
  \textbf{Path following}: Line following or predetermined route
  navigation
\item
  \textbf{Obstacle avoidance}: Dynamic path planning around obstacles
\end{itemize}

\textbf{Programming Structure:}

\begin{lstlisting}[language=C]
while(1) {
    read_sensors();
    process_data();
    make_decision();
    control_motors();
    check_feedback();
    communicate_status();
}
\end{lstlisting}

\end{solutionbox}
\begin{mnemonicbox}
``Sense, Process, Act, Feedback, Communicate -
SPACF''

\end{mnemonicbox}

\end{document}
