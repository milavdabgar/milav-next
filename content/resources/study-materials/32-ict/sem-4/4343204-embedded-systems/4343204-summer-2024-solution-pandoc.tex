\documentclass[10pt,a4paper]{article}
\input{../../../../../../latex-templates/gtu-solutions/preamble.tex}
\input{../../../../../../latex-templates/gtu-solutions/english-boxes.tex}

\begin{document}

\begin{center}
{\Huge\bfseries\color{headcolor} Subject Name Solutions}\\[5pt]
{\LARGE 4343204 -- Summer 2024}\\[3pt]
{\large Semester 1 Study Material}\\[3pt]
{\normalsize\textit{Detailed Solutions and Explanations}}
\end{center}

\vspace{10pt}

\section*{Embedded System (4343204) - Summer 2024
Solution}\label{embedded-system-4343204---summer-2024-solution}

\subsection*{Question 1(a) [3 marks]}\label{q1a}

\textbf{Draw AVR status register.}

\begin{solutionbox}

The AVR Status Register (SREG) contains information about the result of
arithmetic operations and controls interrupts.

\textbf{Diagram:}

\begin{lstlisting}
+---+---+---+---+---+---+---+---+
| I | T | H | S | V | N | Z | C |
+---+---+---+---+---+---+---+---+
  7   6   5   4   3   2   1   0
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{I (bit 7)}: Global Interrupt Enable
\item
  \textbf{T (bit 6)}: Bit Copy Storage
\item
  \textbf{H (bit 5)}: Half Carry Flag
\item
  \textbf{S (bit 4)}: Sign Flag (S = N\oplusV)
\item
  \textbf{V (bit 3)}: Two's Complement Overflow
\item
  \textbf{N (bit 2)}: Negative Flag
\item
  \textbf{Z (bit 1)}: Zero Flag
\item
  \textbf{C (bit 0)}: Carry Flag
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``I Take Health Seriously, Very Nice Zero Carry''

\end{mnemonicbox}
\subsection*{Question 1(b) [4 marks]}\label{q1b}

\textbf{Explain Harvard Architecture in the AVR.}

\begin{solutionbox}

Harvard Architecture in AVR separates program and data memory, allowing
simultaneous access to both.

\textbf{Diagram:}

\includegraphics[width=1\linewidth,height=\textheight,keepaspectratio]{mermaid-220bad68.pdf}

\begin{itemize}
\tightlist
\item
  \textbf{Program Memory}: Stores instructions in Flash memory
\item
  \textbf{Data Memory}: Contains SRAM, registers, and I/O registers
\item
  \textbf{Separate Buses}: Different buses for program and data
\item
  \textbf{Parallel Access}: Can fetch instruction and access data
  simultaneously
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Separate Places for Data And Programs''

\end{mnemonicbox}
\subsection*{Question 1(c) [7 marks]}\label{q1c}

\textbf{Discuss real time operating system.}

\begin{solutionbox}

Real-Time Operating System (RTOS) manages tasks with strict timing
requirements, ensuring predictable response times.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{Key Features of RTOS}
\vspace{-10pt}
\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.4091}}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5909}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Feature
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Task Scheduling & Prioritizes tasks based on urgency \\
Deterministic & Guaranteed response times for events \\
Preemptive & Critical tasks can interrupt lower priority ones \\
Memory Management & Efficient memory allocation without fragmentation \\
Low Latency & Minimal delay between event and response \\
Multitasking & Handles multiple tasks concurrently \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Task-based}: Divides program into independent tasks
\item
  \textbf{Interrupt Handling}: Fast response to external events
\item
  \textbf{Synchronization}: Provides semaphores and mutexes for task
  coordination
\item
  \textbf{Resource Management}: Prevents resource conflicts
\item
  \textbf{Small Footprint}: Optimized for limited hardware resources
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Tasks Run On Strict Timelines''

\end{mnemonicbox}
\subsection*{Question 1(c OR) [7
marks]}\label{question-1c-or-7-marks}

\textbf{Discuss criteria for choosing microcontroller for embedded
system.}

\begin{solutionbox}

Selecting the right microcontroller requires evaluating several key
factors to match application requirements.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{Microcontroller Selection Criteria}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Criterion & Considerations \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Processing Power & CPU speed, bit width (8/16/32-bit) \\
Memory & Flash, RAM, EEPROM sizes \\
Power Consumption & Sleep modes, operating voltage \\
I/O Capabilities & Number of ports, special functions \\
Peripherals & Timers, ADC, communication interfaces \\
Cost & Unit price, development tools cost \\
Development Support & Tools, documentation, community \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Application Needs}: Match controller to task complexity
\item
  \textbf{Real-time Requirements}: Response time constraints
\item
  \textbf{Environmental Factors}: Temperature, noise, vibration
\item
  \textbf{Form Factor}: Physical size and packaging
\item
  \textbf{Future Expansion}: Room for feature growth
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Power, Memory, I/O, Peripherals, Cost''

\end{mnemonicbox}
\subsection*{Question 2(a) [3 marks]}\label{q2a}

\textbf{Define embedded system and draw its general block diagram.}

\begin{solutionbox}

An embedded system is a dedicated computer system designed for specific
functions within a larger mechanical or electrical system.

\textbf{Diagram:}

\begin{lstlisting}
+-------------+      +-------------+      +--------------+
| Input       |----->| Processing  |----->| Output       |
| Devices     |      | Unit        |      | Devices      |
+-------------+      +-------------+      +--------------+
      ^                    ^                    ^
      |                    |                    |
      v                    v                    v
+-------------+      +-------------+      +--------------+
| Sensors     |      | Memory      |      | Actuators    |
+-------------+      +-------------+      +--------------+
                           ^
                           |
                           v
                     +-------------+
                     | Power       |
                     | Supply      |
                     +-------------+
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{Processing Unit}: Microcontroller/microprocessor
\item
  \textbf{Memory}: Stores program and data
\item
  \textbf{Input/Output}: Interfaces with external world
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Processing Memory I/O Power''

\end{mnemonicbox}
\subsection*{Question 2(b) [4 marks]}\label{q2b}

\textbf{List I/O registers associated with each port.}

\begin{solutionbox}

AVR microcontrollers have three primary registers for controlling each
I/O port.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{I/O Port Registers}
\vspace{-10pt}
\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3030}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3030}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3939}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Register
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Function
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
PORTx & Data Register & Sets output values or pull-ups \\
DDRx & Data Direction Register & Sets pin direction (1=output,
0=input) \\
PINx & Port Input Pins & Reads actual pin status \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{x represents}: A, B, C, D (port letter)
\item
  \textbf{Additional Special}: Some ports have PCMSK (Pin Change Mask)
  registers
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Direction, Data, Pin reading''

\end{mnemonicbox}
\subsection*{Question 2(c) [7 marks]}\label{q2c}

\textbf{Explain clock and reset circuit for AVR.}

\begin{solutionbox}

The clock and reset circuits ensure proper initialization and timing of
AVR operations.

\textbf{Clock Circuit Diagram:}

\begin{lstlisting}
          +-------+
          |       |
     +----|  AVR  |----+
     |    |       |    |
     |    +-------+    |
     |                 |
+----+----+       +----+----+
|         |       |         |
|  XTAL1  |       |  XTAL2  |
|         |       |         |
+----|----+       +----|----+
     |                 |
     |                 |
     +--------+--------+
              |
         +----+----+
         |         |
         |  XTAL   |
         |         |
         +----|----+
              |
              |
             GND
\end{lstlisting}

\textbf{Reset Circuit:}

\begin{lstlisting}
        VCC
         |
         |
        +++
        | | 10KΩ
        +++
         |
         +--------+
         |        |
         |   C    |
      +--+--+     |
      |RESET|     |
      |     |    GND
      | AVR |
      +-----+
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{Clock Source}: External crystal, RC oscillator, or internal
  oscillator
\item
  \textbf{Crystal}: Provides accurate timing (1-16 MHz)
\item
  \textbf{Reset Pin}: Active-low input for system restart
\item
  \textbf{Power-on Reset}: Automatic reset when power applied
\item
  \textbf{Brown-out Detection}: Reset if voltage drops below threshold
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Crystal Oscillates, Reset Ensures Start''

\end{mnemonicbox}
\subsection*{Question 2(a OR) [3
marks]}\label{question-2a-or-3-marks}

\textbf{Write characteristics of embedded system.}

\begin{solutionbox}

Embedded systems have unique characteristics that distinguish them from
general-purpose computers.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{Embedded System Characteristics}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Characteristic & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Single-Function & Dedicated to specific tasks \\
Real-time & Predictable response times \\
Resource Constrained & Limited memory, power, processing \\
Reliability & Must operate continuously without fail \\
Reactive & Responds to environmental changes \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Long Life}: Often operates for years without intervention
\item
  \textbf{Often Hidden}: Integrated within larger systems
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Single, Real-time, Resource-limited, Reliable''

\end{mnemonicbox}
\subsection*{Question 2(b OR) [4
marks]}\label{question-2b-or-4-marks}

\textbf{Discuss the role of DDRx in outputting and inputting data.}

\begin{solutionbox}

DDRx (Data Direction Register) configures each pin of port x as either
input or output.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{DDRx Role in I/O Operations}
\vspace{-10pt}
\begin{longtable}[]{@{}llll@{}}
\toprule\noalign{}
DDRx Value & PORTx Value & Mode & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & 0 & Input & High-impedance mode \\
0 & 1 & Input & Pull-up enabled \\
1 & 0 & Output & Output low (0V) \\
1 & 1 & Output & Output high (VCC) \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Direction Control}: 1 = output, 0 = input
\item
  \textbf{Pin-specific}: Each bit controls individual pin
\item
  \textbf{Initial State}: Default is input (all 0s)
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Direction Determines Data flow''

\end{mnemonicbox}
\subsection*{Question 2(c OR) [7
marks]}\label{question-2c-or-7-marks}

\textbf{Draw and explain ATmega32 pin diagram.}

\begin{solutionbox}

ATmega32 is a popular 8-bit AVR microcontroller with 40 pins providing
various functionalities.

\textbf{Diagram:}

\begin{lstlisting}
               +------+
    (XCK) PB0 -|1   40|- PA0 (ADC0)
         PB1  -|2   39|- PA1 (ADC1)
(INT2/AIN0)PB2-|3   38|- PA2 (ADC2)
(OC0/AIN1)PB3 -|4   37|- PA3 (ADC3)
       SS PB4 -|5   36|- PA4 (ADC4)
     MOSI PB5 -|6   35|- PA5 (ADC5)
     MISO PB6 -|7   34|- PA6 (ADC6)
      SCK PB7 -|8   33|- PA7 (ADC7)
       RESET  -|9   32|- AREF
         VCC  -|10  31|- GND
         GND  -|11  30|- AVCC
       XTAL2  -|12  29|- PC7 (TOSC2)
       XTAL1  -|13  28|- PC6 (TOSC1)
   (RXD) PD0  -|14  27|- PC5
   (TXD) PD1  -|15  26|- PC4
  (INT0) PD2  -|16  25|- PC3
  (INT1) PD3  -|17  24|- PC2
  (OC1B) PD4  -|18  23|- PC1
  (OC1A) PD5  -|19  22|- PC0
   (ICP) PD6  -|20  21|- PD7 (OC2)
               +------+
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{Port A (PA0-PA7)}: 8-bit bidirectional port with ADC inputs
\item
  \textbf{Port B (PB0-PB7)}: 8-bit port with SPI, timers, and external
  interrupts
\item
  \textbf{Port C (PC0-PC7)}: 8-bit bidirectional port with TWI support
\item
  \textbf{Port D (PD0-PD7)}: 8-bit port with USART, external interrupts,
  and PWM
\item
  \textbf{Power/Ground}: VCC, GND, AVCC, AREF
\item
  \textbf{Clock}: XTAL1/XTAL2 for external oscillator
\item
  \textbf{Reset}: Active-low reset input
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``ABCD Ports Around Power Clock Reset''

\end{mnemonicbox}
\subsection*{Question 3(a) [3 marks]}\label{q3a}

\textbf{Explain Program Counter (PC) register for ATmega32.}

\begin{solutionbox}

Program Counter (PC) is a 16-bit register that tracks the address of the
next instruction to execute.

\textbf{Diagram:}

\begin{lstlisting}
+---------+--------+
| PC High | PC Low |
+---------+--------+
    15:8     7:0
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{Function}: Points to next instruction in program memory
\item
  \textbf{Size}: 16-bit (can address up to 64K words)
\item
  \textbf{Auto-increment}: Automatically increments after instruction
  fetch
\item
  \textbf{Jump Control}: Modified by branch and jump instructions
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Points to Code Execution''

\end{mnemonicbox}
\subsection*{Question 3(b) [4 marks]}\label{q3b}

\textbf{Write an AVR C program to read the content of location 0x005F of
EEPROM into PORTB.}

\begin{solutionbox}

\begin{lstlisting}[language=C]
#include <avr/io.h>
#include <avr/eeprom.h>

int main(void)
{
    // Set PORTB as output
    DDRB = 0xFF;
    
    // Read from EEPROM location 0x005F and output to PORTB
    PORTB = eeprom_read_byte((uint8_t*)0x005F);
    
    while(1) {
        // Main loop
    }
    return 0;
}
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{DDRB = 0xFF}: Configure all PORTB pins as outputs
\item
  \textbf{eeprom\_read\_byte()}: AVR library function to read EEPROM
\item
  \textbf{while(1)}: Infinite loop to maintain output
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Direction, Read EEPROM, Output to Port''

\end{mnemonicbox}
\subsection*{Question 3(c) [7 marks]}\label{q3c}

\textbf{Draw and explain TCCR0 register in detail.}

\begin{solutionbox}

Timer/Counter Control Register 0 (TCCR0) controls the operation of
Timer/Counter0.

\textbf{Diagram:}

\begin{lstlisting}
+-----+------+------+-----+-----+-----+-----+-----+
| FOC0| WGM00| COM01|COM00|WGM01| CS02| CS01| CS00|
+-----+------+------+-----+-----+-----+-----+-----+
   7     6     5     4     3     2     1     0
\end{lstlisting}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{TCCR0 Bits Function}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bit(s) & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
7 & FOC0 & Force Output Compare \\
6,3 & WGM01:0 & Waveform Generation Mode \\
5,4 & COM01:0 & Compare Match Output Mode \\
2,1,0 & CS02:0 & Clock Select \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{WGM01:0}: Selects Normal, CTC, or PWM modes
\item
  \textbf{COM01:0}: Defines OC0 pin behavior on compare match
\item
  \textbf{CS02:0}: Sets clock source and prescaler (1, 8, 64, 256, 1024)
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Forcing Waveforms, Comparing, Selecting Clock''

\end{mnemonicbox}
\subsection*{Question 3(a OR) [3
marks]}\label{question-3a-or-3-marks}

\textbf{Explain AVR data memory.}

\begin{solutionbox}

AVR data memory consists of multiple sections for different types of
data storage.

\textbf{Diagram:}

\includegraphics[width=1\linewidth,height=\textheight,keepaspectratio]{mermaid-8347998f.pdf}

\begin{itemize}
\tightlist
\item
  \textbf{Registers}: 32 general-purpose registers (R0-R31)
\item
  \textbf{I/O Memory}: Special function registers for peripherals
\item
  \textbf{SRAM}: Internal RAM for variables (volatile)
\item
  \textbf{EEPROM}: Non-volatile memory for persistent data
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Registers I/O SRAM EEPROM''

\end{mnemonicbox}
\subsection*{Question 3(b OR) [4
marks]}\label{question-3b-or-4-marks}

\textbf{Write an AVR C program to store `G' into location 0x005F of
EEPROM.}

\begin{solutionbox}

\begin{lstlisting}[language=C]
#include <avr/io.h>
#include <avr/eeprom.h>

int main(void)
{
    // Store character 'G' to EEPROM location 0x005F
    eeprom_write_byte((uint8_t*)0x005F, 'G');
    
    while(1) {
        // Main loop
    }
    return 0;
}
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{eeprom\_write\_byte()}: AVR library function to write to
  EEPROM
\item
  \textbf{`G'}: ASCII value 71 (0x47) stored in EEPROM
\item
  \textbf{0x005F}: Target EEPROM address
\item
  \textbf{while(1)}: Infinite loop after writing
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Write Once, Remember Forever''

\end{mnemonicbox}
\subsection*{Question 3(c OR) [7
marks]}\label{question-3c-or-7-marks}

\textbf{Draw and explain TIFR register in detail.}

\begin{solutionbox}

Timer/Counter Interrupt Flag Register (TIFR) holds flags that indicate
timer events.

\textbf{Diagram:}

\begin{lstlisting}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  -  |  -  |  -  |  -  |  -  |OCF2 |TOV2 |TOV0 |
+-----+-----+-----+-----+-----+-----+-----+-----+
   7     6     5     4     3     2     1     0
\end{lstlisting}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{TIFR Bits Function}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bit & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & TOV0 & Timer/Counter0 Overflow Flag \\
1 & TOV2 & Timer/Counter2 Overflow Flag \\
2 & OCF2 & Output Compare Flag 2 \\
3-7 & - & Reserved bits \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{TOV0}: Set when Timer0 overflows, cleared when ISR executes
\item
  \textbf{TOV2}: Set when Timer2 overflows
\item
  \textbf{OCF2}: Set when Timer2 compare match occurs
\item
  \textbf{Flag Clearing}: Write `1' to bit to clear flag
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Timers Overflow, Comparisons Flag''

\end{mnemonicbox}
\subsection*{Question 4(a) [3 marks]}\label{q4a}

\textbf{Write different ways of generating delay in AVR.}

\begin{solutionbox}

AVR microcontrollers offer multiple methods to generate time delays.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{Delay Generation Methods}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Method & Description & Precision \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Software Loops & CPU cycles counting & Low \\
Timer Interrupts & Hardware timers with ISR & High \\
Timer Polling & Hardware timers with flag checking & Medium \\
Delay Functions & Library functions (\_delay\_ms/\_delay\_us) &
Medium \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Software}: Simple but affected by optimizations
\item
  \textbf{Hardware}: More accurate but requires timer setup
\item
  \textbf{Library}: Convenient but limited to constant values
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Loops, Interrupts, Polling, Functions''

\end{mnemonicbox}
\subsection*{Question 4(b) [4 marks]}\label{q4b}

\textbf{Draw and explain interfacing of LM35 with ATmega32.}

\begin{solutionbox}

LM35 is a temperature sensor that outputs an analog voltage proportional
to temperature.

\textbf{Circuit Diagram:}

\begin{lstlisting}
    VCC (+5V)
      |
      |
  +---+---+
  |       |
  | LM35  |
  |       |
  +---+---+
      |
      +-------> To ADC0 (PA0)
      |
      |
     GND
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{Connection}: LM35 output to ADC0 (PA0) of ATmega32
\item
  \textbf{Scaling}: 10mV/^\circC output (0^\circC = 0V, 25^\circC = 250mV)
\item
  \textbf{ADC Setup}: Configure ADMUX to select ADC0
\item
  \textbf{Calculation}: Temperature = (ADC\_value * 5 * 100) / 1024
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Analog Voltage Converts Temperature''

\end{mnemonicbox}
\subsection*{Question 4(c) [7 marks]}\label{q4c}

\textbf{Explain interfacing of MAX7221 with ATmega32 in detail.}

\begin{solutionbox}

MAX7221 is an LED display driver IC that connects to AVR using SPI
communication.

\textbf{Circuit Diagram:}

\begin{lstlisting}
 ATmega32                MAX7221
+--------+              +--------+
|        |              |        |
|     PB7|------------->|CLK     |
|     PB5|------------->|DIN     |
|     PB4|------------->|LOAD    |
|        |              |        |
+--------+              +--------+
                             |
                        +----+----+
                        |         |
                        | 7-SEG   |
                        | DISPLAY |
                        |         |
                        +---------+
\end{lstlisting}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{Connections and Functionality}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
ATmega32 Pin & MAX7221 Pin & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
PB7 (SCK) & CLK & Serial Clock \\
PB5 (MOSI) & DIN & Data Input \\
PB4 (SS) & LOAD & Chip Select \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{SPI Mode}: Master mode, MSB first
\item
  \textbf{Initialization}: Set decode mode, intensity, scan limit
\item
  \textbf{Data Transfer}: Send address byte followed by data byte
\item
  \textbf{Multiplexing}: Can drive up to 8 digits
\item
  \textbf{Brightness Control}: 16 levels through intensity register
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Send Clock Data Load Display''

\end{mnemonicbox}
\subsection*{Question 4(a OR) [3
marks]}\label{question-4a-or-3-marks}

\textbf{Explain MAX232 line driver.}

\begin{solutionbox}

MAX232 is an IC that converts TTL/CMOS logic levels to RS-232 voltage
levels for serial communication.

\textbf{Diagram:}

\begin{lstlisting}
    +-------+          +-------+
    |       |C1+    C1-|       |
+---|T1IN   |          |  T1OUT|---+
|   |       |          |       |   |
|   |       |C2+    C2-|       |   |
|   |       |          |       |   |
|   |       |          |       |   |
+---|R1OUT  |          |   R1IN|---+
    |       |          |       |
    |MAX232 |          |  RS232|
    +-------+          +-------+
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{Voltage Conversion}: TTL (0/5V) to RS-232 (\pm12V)
\item
  \textbf{Charge Pumps}: Uses capacitors to generate required voltages
\item
  \textbf{Applications}: Serial communication with PC, modems
\item
  \textbf{Bidirectional}: Handles both transmit and receive signals
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``TTL To RS-232 Conversion''

\end{mnemonicbox}
\subsection*{Question 4(b OR) [4
marks]}\label{question-4b-or-4-marks}

\textbf{Explain ADMUX register.}

\begin{solutionbox}

ADC Multiplexer Selection Register (ADMUX) controls analog input channel
selection and result format.

\textbf{Diagram:}

\begin{lstlisting}
+-----+-----+-----+-----+-----+-----+-----+-----+
|REFS1|REFS0|ADLAR| -   |MUX3 |MUX2 |MUX1 |MUX0 |
+-----+-----+-----+-----+-----+-----+-----+-----+
   7     6     5     4     3     2     1     0
\end{lstlisting}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{ADMUX Bit Functions}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bits & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
7:6 & REFS1:0 & Reference Selection \\
5 & ADLAR & ADC Left Adjust Result \\
3:0 & MUX3:0 & Analog Channel Selection \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{REFS1:0}: Select voltage reference (AREF, AVCC, Internal)
\item
  \textbf{ADLAR}: Result alignment in ADC registers
\item
  \textbf{MUX3:0}: Select input channel (ADC0-ADC7)
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Reference, Alignment, Multiplexer''

\end{mnemonicbox}
\subsection*{Question 4(c OR) [7
marks]}\label{question-4c-or-7-marks}

\textbf{Discuss Two Wire serial Interface (TWI) in AVR.}

\begin{solutionbox}

Two Wire Interface (TWI) is AVR's implementation of I^{2}C protocol for
communication with peripheral devices.

\textbf{Diagram:}

\includegraphics[width=1\linewidth,height=\textheight,keepaspectratio]{mermaid-cdbb4726.pdf}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{TWI Characteristics}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Feature & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Pins & SCL (Serial Clock) and SDA (Serial Data) \\
Speed & Standard (100kHz), Fast (400kHz) \\
Addressing & 7-bit or 10-bit device addressing \\
Operation & Master or Slave mode \\
Bus Structure & Multi-master, multi-slave \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Bidirectional}: Both devices can transmit and receive
\item
  \textbf{Registers}: TWBR, TWCR, TWSR, TWDR, TWAR
\item
  \textbf{ACK/NACK}: Acknowledgment for reliable transfers
\item
  \textbf{Start/Stop}: Special conditions to begin/end transmission
\item
  \textbf{Common Uses}: EEPROM, RTC, sensors, displays
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Serial Clock And Data Transfers''

\end{mnemonicbox}
\subsection*{Question 5(a) [3 marks]}\label{q5a}

\textbf{Draw circuit diagram to interface DC motor with ATmega32 using
L293D motor driver.}

\begin{solutionbox}

L293D provides bidirectional drive current for controlling DC motors
with microcontrollers.

\textbf{Circuit Diagram:}

\begin{lstlisting}
         ATmega32               L293D                DC Motor
        +--------+           +--------+              +-----+
        |        |           |        |              |     |
        |     PD0|---------->|IN1     |              |     |
        |     PD1|---------->|IN2     |              |     |
        |        |           |        |              |     |
        |        |           |OUT1 >--|--------------|+    |
        |        |           |OUT2 >--|--------------|−    |
        |        |           |        |              |     |
        +--------+           +--------+              +-----+
                                 |
                                 | +5V
                              +--+--+
                              |     |
                              |Power|
                              |     |
                              +-----+
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{Control Pins}: PD0, PD1 control motor direction
\item
  \textbf{Driver Power}: Separate for logic and motor
\item
  \textbf{H-Bridge}: Enables forward/reverse operation
\item
  \textbf{Enable Pin}: Can be used for PWM speed control
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Direction Control Through Bridge''

\end{mnemonicbox}
\subsection*{Question 5(b) [4 marks]}\label{q5b}

\textbf{Write features of on chip ADC in ATmega32.}

\begin{solutionbox}

ATmega32 features a versatile analog-to-digital converter for measuring
analog signals.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{ATmega32 ADC Features}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Feature & Specification \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Resolution & 10-bit \\
Channels & 8 single-ended inputs \\
Conversion Time & 65-260 μs \\
Reference Voltage & AREF, AVCC, or 2.56V internal \\
Accuracy & \pm2 LSB \\
Conversion Modes & Single and Free Running \\
Input Range & 0V to VREF \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Successive Approximation}: Conversion technique
\item
  \textbf{Multiplexer}: Selects among 8 input channels
\item
  \textbf{Interrupt}: Optional interrupt on completion
\item
  \textbf{Sampling Rate}: Up to 15 KSPS at maximum resolution
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Multiple Channels, Ten-bit Resolution''

\end{mnemonicbox}
\subsection*{Question 5(c) [7 marks]}\label{q5c}

\textbf{Explain Smart Irrigation System.}

\begin{solutionbox}

Smart Irrigation System automates watering based on environmental
conditions using microcontroller technology.

\textbf{Diagram:}

\includegraphics[width=1\linewidth,height=\textheight,keepaspectratio]{mermaid-032f73b6.pdf}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{System Components}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Component & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Soil Moisture Sensor & Measures water content in soil \\
Temperature/Humidity & Monitors environmental conditions \\
Water Pump & Delivers water when needed \\
Valves & Controls water flow to different zones \\
LCD Display & Shows system status \\
RTC Module & Tracks time for scheduled irrigation \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Adaptive Control}: Adjusts watering based on conditions
\item
  \textbf{Water Conservation}: Uses only necessary amount of water
\item
  \textbf{Remote Monitoring}: Optional WiFi/GSM connectivity
\item
  \textbf{Data Logging}: Records moisture levels and watering events
\item
  \textbf{Battery Backup}: Ensures operation during power outages
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Sense Moisture, Control Water Automatically''

\end{mnemonicbox}
\subsection*{Question 5(a OR) [3
marks]}\label{question-5a-or-3-marks}

\textbf{Draw and explain pin diagram of L293D motor driver IC.}

\begin{solutionbox}

L293D is a quadruple half-H driver IC used for controlling motors and
other inductive loads.

\textbf{Diagram:}

\begin{lstlisting}
        +------+
        | 1 16 | 
    EN1-|      |-VCC1
    IN1-|      |-IN4
   OUT1-|      |-OUT4
    GND-| L293D|-GND
    GND-|      |-GND
   OUT2-|      |-OUT3
    IN2-|      |-IN3
   VCC2-|      |-EN2
        +------+
\end{lstlisting}

\begin{itemize}
\tightlist
\item
  \textbf{VCC1 (Pin 16)}: Logic supply voltage (5V)
\item
  \textbf{VCC2 (Pin 8)}: Motor supply voltage (4.5V-36V)
\item
  \textbf{EN1/EN2}: Enable inputs (can be PWM for speed control)
\item
  \textbf{IN1-IN4}: Logic inputs to control direction
\item
  \textbf{OUT1-OUT4}: Outputs to connect motors
\item
  \textbf{GND}: Ground connections
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Enable, Input, Output, Power''

\end{mnemonicbox}
\subsection*{Question 5(b OR) [4
marks]}\label{question-5b-or-4-marks}

\textbf{List registers associated with ADC in AVR.}

\begin{solutionbox}

AVR's ADC system uses several registers to control its operation and
store results.


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{ADC Registers}
\vspace{-10pt}
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Register & Function & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
ADMUX & Multiplexer & Channel selection and reference options \\
ADCSRA & Control \& Status & Control bits and flags \\
ADCH & Data High & High byte of conversion result \\
ADCL & Data Low & Low byte of conversion result \\
SFIOR & Special Function & ADC trigger source selection \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{ADMUX}: Channel and reference selection
\item
  \textbf{ADCSRA}: Enable ADC, start conversion, prescaler
\item
  \textbf{ADCH/ADCL}: Result registers (10-bit value)
\item
  \textbf{SFIOR}: Auto-trigger sources (Timer, External)
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Multiplexer Controls And Delivers Results''

\end{mnemonicbox}
\subsection*{Question 5(c OR) [7
marks]}\label{question-5c-or-7-marks}

\textbf{Explain IoT based home automation system.}

\begin{solutionbox}

IoT home automation connects household devices to the internet for
remote monitoring and control.

\textbf{Diagram:}

\includegraphics[width=1\linewidth,height=\textheight,keepaspectratio]{mermaid-21961fa0.pdf}


{\def\LTcaptype{none} % do not increment counter
\vspace{-5pt}
\captionof{table}{System Components}
\vspace{-10pt}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Component & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Controller & Processes sensor data and commands \\
Sensors & Monitor environmental conditions \\
Actuators & Control appliances and systems \\
Communication & WiFi/Ethernet/Bluetooth connectivity \\
Gateway & Connects local network to internet \\
Mobile App & User interface for remote control \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Remote Access}: Control home from anywhere
\item
  \textbf{Scheduling}: Automate device operation based on time
\item
  \textbf{Voice Control}: Integration with digital assistants
\item
  \textbf{Energy Monitoring}: Track power consumption
\item
  \textbf{Security}: Alerts for unusual activities
\item
  \textbf{Scene Setting}: One-touch control of multiple devices
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Connect, Control, Automate, Monitor''

\end{mnemonicbox}

\end{document}
