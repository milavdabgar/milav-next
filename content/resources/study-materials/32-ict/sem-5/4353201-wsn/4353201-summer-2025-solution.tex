\documentclass{article}
\input{/Users/milav/Code/milav-next/latex-templates/gtu-solutions/preamble.tex}
\input{/Users/milav/Code/milav-next/latex-templates/gtu-solutions/english-boxes.tex}
\input{/Users/milav/Code/milav-next/latex-templates/gtu-solutions/commands.tex}

\title{Wireless Sensor Networks and IoT (4353201) - Summer 2025 Solution}
\date{May 12, 2025}

\begin{document}
\maketitle

\questionmarks{1(a)}{3}{Define Wireless Sensor Networks (WSN) and list its key components.}

\begin{solutionbox}
\textbf{WSN Definition}: A Wireless Sensor Network is a collection of spatially distributed autonomous sensors that monitor physical or environmental conditions and cooperatively pass data through the network to a main location.

\begin{center}
\captionof{table}{Key Components}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Component} & \textbf{Function} \\ \hline
\textbf{Sensor Nodes} & Collect environmental data \\ \hline
\textbf{Base Station} & Data collection and processing center \\ \hline
\textbf{Communication Links} & Wireless data transmission \\ \hline
\textbf{Gateway} & Interface between WSN and external networks \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SBCG - Sensors Base Communication Gateway}
\end{mnemonicbox}

\questionmarks{1(b)}{4}{Explain the role of the physical layer in WSNs.}

\begin{solutionbox}
\textbf{Physical Layer Functions:}

\begin{itemize}
    \item \textbf{Signal Transmission}: Converts digital data into radio waves for wireless communication
    \item \textbf{Frequency Management}: Operates in ISM bands (2.4 GHz, 915 MHz, 433 MHz)
    \item \textbf{Power Control}: Manages transmission power to optimize battery life
    \item \textbf{Modulation}: Uses techniques like BPSK, QPSK for data encoding
\end{itemize}

\begin{center}
\begin{tikzpicture}[node distance=2cm, auto]
    \node [gtu block] (data) {Digital\\Data};
    \node [gtu block, right of=data, node distance=3.5cm] (phy) {Physical\\Layer};
    \node [gtu block, right of=phy, node distance=3.5cm] (ant) {Antenna\\Transmission};

    \path [gtu arrow] (data) -- (phy);
    \path [gtu arrow] (phy) -- (ant);
\end{tikzpicture}
\captionof{figure}{Simple Block Diagram}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SFPM - Signal Frequency Power Modulation}
\end{mnemonicbox}

\questionmarks{1(c)}{7}{Discuss the design considerations for transceivers in WSNs.}

\begin{solutionbox}
\textbf{Key Design Considerations:}

\begin{itemize}
    \item \textbf{Power Efficiency}: Ultra-low power consumption for extended battery life
    \item \textbf{Communication Range}: Balance between range (10m-1km) and power consumption
    \item \textbf{Data Rate}: Typically 20-250 kbps for sensor applications
    \item \textbf{Frequency Band}: ISM bands to avoid licensing requirements
    \item \textbf{Modulation Scheme}: Simple schemes like OOK, FSK for low power
    \item \textbf{Antenna Design}: Compact, omnidirectional antennas
    \item \textbf{Cost Factor}: Low-cost components for large-scale deployment
\end{itemize}

\textbf{Transceiver Architecture:}

\begin{center}
\begin{tikzpicture}[node distance=2.5cm, auto]
    \node [gtu block] (mcu) {MCU};
    \node [gtu block, right of=mcu] (rf) {RF\\Frontend};
    \node [gtu block, right of=rf] (palna) {PA/LNA};
    \node [gtu block, right of=palna] (ant) {Antenna};

    \path [gtu arrow] (mcu) edge [latex-latex] (rf);
    \path [gtu arrow] (rf) edge [latex-latex] (palna);
    \path [gtu arrow] (palna) edge [latex-latex] (ant);
\end{tikzpicture}
\captionof{figure}{Transceiver Architecture}
\end{center}

\begin{center}
\captionof{table}{Trade-offs}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Parameter} & \textbf{High Performance} & \textbf{Low Power} \\ \hline
99: Range & Long (1km) & Short (100m) \\ \hline
100: Power & High (100mW) & Low (1mW) \\ \hline
101: Cost & Expensive & Cheap \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{PCRFMAC - Power Communication Range Frequency Modulation Antenna Cost}
\end{mnemonicbox}

\questionmarks{1(c OR)}{7}{Explain optimization goals and figures of merit in WSN.}

\begin{solutionbox}
\textbf{Optimization Goals:}

\begin{itemize}
    \item \textbf{Energy Efficiency}: Maximize network lifetime by minimizing power consumption
    \item \textbf{Coverage}: Ensure complete area monitoring with minimum sensor nodes
    \item \textbf{Connectivity}: Maintain network connectivity even with node failures
    \item \textbf{Data Quality}: High accuracy and reliability of collected data
    \item \textbf{Scalability}: Support large number of nodes (100-10000)
    \item \textbf{Cost Effectiveness}: Minimize deployment and maintenance costs
\end{itemize}

\begin{center}
\captionof{table}{Figures of Merit}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Metric} & \textbf{Description} & \textbf{Typical Value} \\ \hline
\textbf{Network Lifetime} & Time until first node dies & 1-5 years \\ \hline
\textbf{Coverage Ratio} & Area covered/Total area & >95\% \\ \hline
\textbf{Connectivity} & Connected nodes/Total nodes & >90\% \\ \hline
\textbf{Latency} & End-to-end delay & <1 second \\ \hline
\textbf{Throughput} & Data rate per node & 1-100 kbps \\ \hline
\end{tabulary}
\end{center}

\textbf{Optimization Techniques:}

\begin{itemize}
    \item \textbf{Clustering}: Reduce communication overhead
    \item \textbf{Data Aggregation}: Minimize redundant transmissions
    \item \textbf{Sleep Scheduling}: Turn off nodes when not needed
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{ECCDC - Energy Coverage Connectivity Data Cost}
\end{mnemonicbox}

\questionmarks{2(a)}{3}{List the characteristics of Sensor MAC protocol in WSNs.}

\begin{solutionbox}
\textbf{S-MAC Protocol Characteristics:}

\begin{center}
\captionof{table}{Characteristics}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Characteristic} & \textbf{Description} \\ \hline
\textbf{Duty Cycling} & Periodic sleep and wake-up cycles \\ \hline
\textbf{Collision Avoidance} & RTS/CTS mechanism \\ \hline
\textbf{Overhearing Avoidance} & Nodes sleep during irrelevant transmissions \\ \hline
\textbf{Message Passing} & Long messages broken into fragments \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DCOM - Duty Collision Overhearing Message}
\end{mnemonicbox}

\questionmarks{2(b)}{4}{Describe the concept of energy-efficient routing in WSNs.}

\begin{solutionbox}
\textbf{Energy-Efficient Routing Concept:}

Energy-efficient routing minimizes power consumption while maintaining network connectivity and data delivery.

\textbf{Key Techniques:}

\begin{itemize}
    \item \textbf{Multi-hop Communication}: Short hops consume less power than long hops
    \item \textbf{Load Balancing}: Distribute traffic to avoid node depletion
    \item \textbf{Data Aggregation}: Combine data from multiple sources
    \item \textbf{Geographic Routing}: Use location information for efficient paths
\end{itemize}

\textbf{Energy Model:}

\begin{lstlisting}[language={},caption={Energy Model Equations}]
E_tx = E_elec * k + e_amp * k * d^2
E_rx = E_elec * k
\end{lstlisting}

\begin{center}
\captionof{table}{Routing Strategies}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Strategy} & \textbf{Power Saving} & \textbf{Implementation} \\ \hline
\textbf{Shortest Path} & Medium & Simple \\ \hline
\textbf{Min-Energy} & High & Complex \\ \hline
\textbf{Max-Lifetime} & Very High & Very Complex \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{MLDG - Multi-hop Load Data Geographic}
\end{mnemonicbox}

\questionmarks{2(c)}{7}{Explain the classification of MAC protocols for WSNs with examples.}

\begin{solutionbox}
\textbf{MAC Protocol Classification:}

\begin{center}
\begin{tikzpicture}[
    level 1/.style={sibling distance=4cm},
    level 2/.style={sibling distance=1.5cm},
    edge from parent/.style={draw, -latex},
    every node/.style={gtu block, font=\small, align=center}
]
    \node {MAC Protocols}
        child {node {Contention\\Based}
            child {node {CSMA/CA}}
            child {node {S-MAC}}
            child {node {T-MAC}}
        }
        child {node {Schedule\\Based}
            child {node {TDMA}}
            child {node {LEACH}}
            child {node {TRAMA}}
        }
        child {node {Hybrid}
            child {node {Z-MAC}}
            child {node {Funneling\\MAC}}
        };
\end{tikzpicture}
\captionof{figure}{MAC Protocol Classification}
\end{center}

\textbf{Detailed Classification:}

\textbf{1. Contention-Based Protocols:}
\begin{itemize}
    \item \textbf{CSMA/CA}: Carrier sensing before transmission
    \item \textbf{S-MAC}: Synchronized duty cycles with sleep schedules
    \item \textbf{T-MAC}: Adaptive duty cycle based on traffic
\end{itemize}

\textbf{2. Schedule-Based Protocols:}
\begin{itemize}
    \item \textbf{TDMA}: Time slots allocated to nodes
    \item \textbf{LEACH}: Cluster-based with rotating cluster heads
    \item \textbf{TRAMA}: Traffic-adaptive medium access
\end{itemize}

\textbf{3. Hybrid Protocols:}
\begin{itemize}
    \item \textbf{Z-MAC}: Combines CSMA and TDMA benefits
    \item \textbf{Funneling-MAC}: Different protocols for different network regions
\end{itemize}

\begin{center}
\captionof{table}{Comparison}
\begin{tabulary}{\linewidth}{|L|L|L|L|}
\hline
\textbf{Protocol Type} & \textbf{Energy Efficiency} & \textbf{Latency} & \textbf{Scalability} \\ \hline
\textbf{Contention} & Medium & Low & High \\ \hline
\textbf{Schedule} & High & Medium & Medium \\ \hline
\textbf{Hybrid} & High & Low & High \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{CSH - Contention Schedule Hybrid}
\end{mnemonicbox}

\questionmarks{2(a OR)}{3}{State the purpose of address management in WSNs.}

\begin{solutionbox}
\textbf{Address Management Purpose:}

\begin{center}
\captionof{table}{Purposes}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Purpose} & \textbf{Description} \\ \hline
\textbf{Node Identification} & Unique identification of each sensor node \\ \hline
\textbf{Routing Support} & Enable efficient data forwarding \\ \hline
\textbf{Network Organization} & Hierarchical addressing for scalability \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{NIR - Node Identification Routing}
\end{mnemonicbox}

\questionmarks{2(b OR)}{4}{Explain geographic routing in Detail.}

\begin{solutionbox}
\textbf{Geographic Routing:}

Geographic routing uses physical location information to make forwarding decisions without maintaining routing tables.

\textbf{Key Components:}

\begin{itemize}
    \item \textbf{Location Service}: GPS or localization algorithms
    \item \textbf{Greedy Forwarding}: Forward to neighbor closest to destination
    \item \textbf{Face Routing}: Handle local minima situations
    \item \textbf{Coordinate System}: 2D/3D positioning
\end{itemize}

\textbf{Forwarding Algorithm:}

\begin{lstlisting}[language={},caption={Forwarding Algorithm}]
1. Receive packet with destination coordinates
2. Find neighbor closest to destination
3. If closer than current node, forward
4. Else use face routing or drop
\end{lstlisting}

\begin{center}
\captionof{table}{Advantages/Disadvantages}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Aspect} & \textbf{Advantage} & \textbf{Disadvantage} \\ \hline
\textbf{Scalability} & No routing tables & Location overhead \\ \hline
\textbf{Adaptability} & Handles mobility & Local minima problem \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{LGFC - Location Greedy Face Coordinate}
\end{mnemonicbox}

\questionmarks{2(c OR)}{7}{Explain the working of the LEACH protocol in WSN.}

\begin{solutionbox}
\textbf{LEACH Protocol (Low-Energy Adaptive Clustering Hierarchy):}

\textbf{Protocol Phases:}

\begin{center}
\begin{tikzpicture}[node distance=2.5cm, auto]
    \node [gtu state] (setup) {Setup\\Phase};
    \node [gtu state, right of=setup, node distance=5cm] (steady) {Steady State\\Phase};

    \path [gtu arrow] (setup) edge [bend left] (steady);
    \path [gtu arrow] (steady) edge [bend left] (setup);
    
    % Details for Setup
    \node [below of=setup, node distance=2cm, align=center, font=\footnotesize] {Cluster Head Selection\\Cluster Formation\\Schedule Creation};

    % Details for Steady
    \node [below of=steady, node distance=2cm, align=center, font=\footnotesize] {Data Collection\\Data Aggregation\\Data Transmission};
\end{tikzpicture}
\captionof{figure}{LEACH Protocol Phases}
\end{center}

\textbf{Detailed Working:}

\textbf{1. Setup Phase:}
\begin{itemize}
    \item \textbf{Cluster Head Selection}: Nodes decide to become cluster heads based on probability
    \item \textbf{Advertisement}: Cluster heads broadcast advertisement messages
    \item \textbf{Cluster Formation}: Non-cluster head nodes join nearest cluster head
    \item \textbf{Schedule Creation}: TDMA schedule created for cluster members
\end{itemize}

\textbf{2. Steady State Phase:}
\begin{itemize}
    \item \textbf{Data Collection}: Cluster members collect and send data to cluster head
    \item \textbf{Data Aggregation}: Cluster head aggregates received data
    \item \textbf{Data Transmission}: Aggregated data sent to base station
\end{itemize}

\textbf{Cluster Head Selection Formula:}

\begin{lstlisting}[language={},caption={Cluster Head Probability}]
P(n) = k / (N - k * (r mod N/k))
Where: 
k = desired cluster heads
N = total nodes
r = current round
\end{lstlisting}

\textbf{Energy Benefits:}
\begin{itemize}
    \item \textbf{Load Distribution}: Cluster head role rotates among nodes
    \item \textbf{Data Aggregation}: Reduces transmissions to base station
    \item \textbf{Short Range Communication}: Most transmissions are within cluster
\end{itemize}

\begin{center}
\captionof{table}{Performance Metrics}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Metric} & \textbf{LEACH} & \textbf{Direct Transmission} \\ \hline
\textbf{Network Lifetime} & 8x longer & Baseline \\ \hline
\textbf{Energy Distribution} & Uniform & Uneven \\ \hline
\textbf{Scalability} & High & Low \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SSCADT - Setup Steady Cluster Aggregation Data Transmission}
\end{mnemonicbox}

\questionmarks{3(a)}{3}{Define IoT and state its key sources.}

\begin{solutionbox}
\textbf{IoT Definition}: The Internet of Things (IoT) describes the network of physical objects (things) embedded with sensors, software, and other technologies for the purpose of connecting and exchanging data with other devices and systems over the internet.

\begin{center}
\captionof{table}{Key Sources}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Source} & \textbf{Description} \\ \hline
\textbf{RFID Technology} & Identification and tracking of objects \\ \hline
\textbf{Sensor Networks} & Data collection from environment \\ \hline
\textbf{Mobile Computing} & Ubiquitous connectivity via smartphones \\ \hline
\textbf{Cloud Computing} & Scalable data storage and processing \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{RSMC - RFID Sensor Mobile Cloud}
\end{mnemonicbox}

\questionmarks{3(b)}{4}{Explain the modified OSI model for IoT/M2M systems.}

\begin{solutionbox}
\textbf{Modified OSI Model for IoT:}

The traditional 7-layer OSI model is adapted for IoT to handle resource constraints and specific communication needs.

\begin{center}
\captionof{table}{Layer Comparison}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Layer} & \textbf{Traditional OSI} & \textbf{IoT/M2M Modification} \\ \hline
\textbf{Application} & End-user applications & IoT Applications, Data Analytics \\ \hline
\textbf{Presentation} & Data formatting & Data Aggregation, Semantic Processing \\ \hline
\textbf{Session} & Session management & Device Management, Security \\ \hline
\textbf{Transport} & End-to-end delivery & Reliable/Unreliable delivery (UDP/TCP) \\ \hline
\textbf{Network} & Routing & IPv6, 6LoWPAN, RPL Routing \\ \hline
\textbf{Data Link} & Frame delivery & IEEE 802.15.4, WiFi, Bluetooth \\ \hline
\textbf{Physical} & Bit transmission & Radio, Optical, Wired Transmission \\ \hline
\end{tabulary}
\end{center}

\textbf{Protocol Stack Example:}

\begin{center}
\begin{tikzpicture}[node distance=1cm, auto]
    \node [gtu block, minimum width=4cm] (app) {IoT Application};
    \node [gtu block, minimum width=4cm, below of=app] (coap) {CoAP/MQTT};
    \node [gtu block, minimum width=4cm, below of=coap] (udp) {UDP};
    \node [gtu block, minimum width=4cm, below of=udp] (lowpan) {6LoWPAN};
    \node [gtu block, minimum width=4cm, below of=lowpan] (phy) {IEEE 802.15.4};
\end{tikzpicture}
\captionof{figure}{IoT Protocol Stack}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{Six-Layer Low-Power WAN - 6LoWPAN}
\end{mnemonicbox}

\questionmarks{3(c)}{7}{Discuss the major ingredients of IoT system with diagram.}

\begin{solutionbox}
\textbf{IoT System Architecture:}

\begin{center}
\begin{tikzpicture}[node distance=2.2cm, auto]
    \node [gtu block] (sensor) {Sensors};
    \node [gtu block, right of=sensor] (gw) {Gateway};
    \node [gtu block, right of=gw] (net) {Network};
    \node [gtu block, right of=net] (cloud) {Cloud};
    \node [gtu block, right of=cloud] (app) {Analytics};
    
    \path [gtu arrow] (sensor) -- (gw);
    \path [gtu arrow] (gw) -- (net);
    \path [gtu arrow] (net) -- (cloud);
    \path [gtu arrow] (cloud) -- (app);

    % Additional blocks
    \node [gtu block, below of=gw, node distance=1.5cm] (sec) {Security};
    \node [gtu block, below of=sensor, node distance=1.5cm] (dev) {Device Mgmt};
    
    \path [gtu arrow, dashed] (sec) -- (gw);
    \path [gtu arrow, dashed] (sec) -- (net);
    \path [gtu arrow, dashed] (sec) -- (cloud);
    \path [gtu arrow, dashed] (dev) -- (sensor);
\end{tikzpicture}
\captionof{figure}{IoT System Ingredients}
\end{center}

\textbf{Major Ingredients:}
\begin{enumerate}
    \item \textbf{Device Layer}: Sensors, Actuators, Microcontrollers (ESP32), Communication modules.
    \item \textbf{Connectivity Layer}: Gateways, Network infrastructure, Protocols (MQTT, HTTP).
    \item \textbf{Data Processing Layer}: Cloud platforms, Edge computing, Storage.
    \item \textbf{Application Layer}: Analytics engines, Machine Learning, APIs.
    \item \textbf{Business Layer}: User interfaces, Business logic, Integration.
\end{enumerate}

\begin{center}
\captionof{table}{Ingredient Functions}
\begin{tabulary}{\linewidth}{|L|L|L|L|}
\hline
\textbf{Ingredient} & \textbf{Input} & \textbf{Processing} & \textbf{Output} \\ \hline
\textbf{Sensors} & Physical Parameters & Analog to Digital & Digital Data \\ \hline
\textbf{Gateway} & Sensor Data & Protocol Conversion & Network Packets \\ \hline
\textbf{Cloud} & Raw Data & Storage and Analytics & Processed Info \\ \hline
\textbf{Applications} & Processed Data & Business Logic & User Actions \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DCDA-B - Device Connectivity Data Application Business}
\end{mnemonicbox}

\questionmarks{3(a OR)}{3}{List three challenges of IoT implementation.}

\begin{solutionbox}
\textbf{IoT Implementation Challenges:}

\begin{center}
\captionof{table}{Challenges}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Challenge} & \textbf{Description} \\ \hline
\textbf{Security \& Privacy} & Protecting data and device access \\ \hline
\textbf{Interoperability} & Different protocols and standards \\ \hline
\textbf{Scalability} & Managing millions of connected devices \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SIS - Security Interoperability Scalability}
\end{mnemonicbox}

\questionmarks{3(b OR)}{4}{Describe the technology behind IoT with examples.}

\begin{solutionbox}
\textbf{Key Technologies:}

\begin{itemize}
    \item \textbf{Sensing Technology}: MEMS, Environmental (DHT22), Biometric sensors.
    \item \textbf{Communication Technology}: Short range (WiFi, Zigbee), Long range (LoRaWAN, 5G).
    \item \textbf{Computing Technology}: Microcontrollers (ESP32), SBCs (Raspberry Pi).
    \item \textbf{Cloud Technology}: AWS IoT, Azure IoT, Data analytics platforms.
\end{itemize}

\textbf{Technology Stack Example:}

\begin{center}
\begin{tikzpicture}[node distance=1cm, auto]
    \node [gtu block, minimum width=4cm] (cloud) {Cloud (AWS)};
    \node [gtu block, minimum width=4cm, below of=cloud] (wifi) {WiFi Network};
    \node [gtu block, minimum width=4cm, below of=wifi] (mcu) {ESP32 MCU};
    \node [gtu block, minimum width=4cm, below of=mcu] (sensor) {DHT22 Sensor};
\end{tikzpicture}
\captionof{figure}{Tech Stack Example}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SCCC - Sensing Communication Computing Cloud}
\end{mnemonicbox}

\questionmarks{3(c OR)}{7}{Explain the role of M2M communication in IoT with example application.}

\begin{solutionbox}
\textbf{M2M Communication in IoT:}

Machine-to-Machine (M2M) communication enables automated data exchange between devices without human intervention.

\textbf{M2M Architecture:}

\begin{center}
\begin{tikzpicture}[node distance=2.5cm, auto]
    \node [gtu block] (gw) {M2M Gateway};
    \node [gtu block, left of=gw] (d1) {Device 1};
    \node [gtu block, above of=d1, node distance=1.5cm] (d2) {Device 2};
    \node [gtu block, below of=d1, node distance=1.5cm] (d3) {Device 3};
    
    \node [gtu block, right of=gw, node distance=3cm] (server) {M2M Server};
    \node [gtu block, right of=server] (app) {App Server};
    \node [gtu block, right of=app] (user) {End User};

    \path [gtu arrow] (d1) -- (gw);
    \path [gtu arrow] (d2) -- (gw);
    \path [gtu arrow] (d3) -- (gw);
    \path [gtu arrow] (gw) -- (server);
    \path [gtu arrow] (server) -- (app);
    \path [gtu arrow] (app) -- (user);
\end{tikzpicture}
\captionof{figure}{M2M Architecture}
\end{center}

\textbf{Example Application: Smart Street Lighting System}
\begin{itemize}
    \item \textbf{Motion Sensors}: Detect movement and send data via Zigbee.
    \item \textbf{Lights}: Communicate to create a "lighting path", adjusting brightness.
    \item \textbf{Controller}: Optimizes schedules via cellular connection.
    \item \textbf{Benefits}: Energy efficiency (60\%), Predictive maintenance.
\end{itemize}

\begin{center}
\captionof{table}{Performance Metrics}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Metric} & \textbf{Traditional} & \textbf{M2M Smart System} \\ \hline
\textbf{Energy Usage} & 100\% & 40\% \\ \hline
\textbf{Response Time} & Manual (Hours) & Automated (Seconds) \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{ARSR - Autonomous Real-time Scalable Reliable}
\end{mnemonicbox}

\questionmarks{4(a)}{3}{Name three application layer protocols used in IoT.}

\begin{solutionbox}
\textbf{IoT Application Layer Protocols:}

\begin{center}
\captionof{table}{Protocols}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Protocol} & \textbf{Purpose} \\ \hline
\textbf{MQTT} & Lightweight publish-subscribe messaging \\ \hline
\textbf{CoAP} & Constrained Application Protocol for resource-limited devices \\ \hline
\textbf{HTTP/HTTPS} & Web-based RESTful communication \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{MCH - MQTT CoAP HTTP}
\end{mnemonicbox}

\questionmarks{4(b)}{4}{Explain the role of MQTT in IoT systems.}

\begin{solutionbox}
\textbf{MQTT Role:}
MQTT (Message Queuing Telemetry Transport) is a lightweight publish-subscribe messaging protocol designed for IoT devices with limited bandwidth and power.

\textbf{Architecture:}

\begin{center}
\begin{tikzpicture}[node distance=3cm, auto]
    \node [gtu block] (broker) {MQTT\\Broker};
    \node [gtu block, left of=broker] (pub) {Publisher\\(Sensor)};
    \node [gtu block, right of=broker] (sub) {Subscriber\\(Display)};

    \path [gtu arrow] (pub) -- node [above] {Publish} (broker);
    \path [gtu arrow] (broker) -- node [above] {Subscribe} (sub);
\end{tikzpicture}
\captionof{figure}{MQTT Architecture}
\end{center}

\textbf{QoS Levels:}
\begin{itemize}
    \item \textbf{QoS 0}: At most once (Fire and forget).
    \item \textbf{QoS 1}: At least once (Guaranteed delivery).
    \item \textbf{QoS 2}: Exactly once (Critical data).
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{PQPL - Publish QoS Persistent Last-will}
\end{mnemonicbox}

\questionmarks{4(c)}{7}{Design a system to read temperature sensor data and transmit it to cloud platform using NodeMCU.}

\begin{solutionbox}
\textbf{System Design: Temperature Monitoring System}

\begin{center}
\begin{tikzpicture}[node distance=2.2cm, auto]
    \node [gtu block] (sensor) {DHT22};
    \node [gtu block, right of=sensor] (mcu) {NodeMCU};
    \node [gtu block, right of=mcu] (wifi) {Router};
    \node [gtu block, right of=wifi] (cloud) {Cloud};
    \node [gtu block, right of=cloud] (dash) {Dashboard};

    \path [gtu arrow] (sensor) -- (mcu);
    \path [gtu arrow] (mcu) -- (wifi);
    \path [gtu arrow] (wifi) -- (cloud);
    \path [gtu arrow] (cloud) -- (dash);
\end{tikzpicture}
\captionof{figure}{System Architecture}
\end{center}

\textbf{Circuit Diagram:}

\begin{center}
\begin{tikzpicture}[node distance=3cm, auto]
    \node [gtu block, minimum height=2cm] (mcu) {NodeMCU\\ESP8266};
    \node [gtu block, right of=mcu, minimum height=2cm] (sensor) {DHT22\\Sensor};

    \draw [thick] (mcu.east) -- (sensor.west) node [midway, above] {D4 $\leftrightarrow$ DATA};
    \draw [thick] ([yshift=0.5cm]mcu.east) -- ([yshift=0.5cm]sensor.west) node [midway, above] {3.3V $\leftrightarrow$ VCC};
    \draw [thick] ([yshift=-0.5cm]mcu.east) -- ([yshift=-0.5cm]sensor.west) node [midway, above] {GND $\leftrightarrow$ GND};
\end{tikzpicture}
\captionof{figure}{Hardware Connections}
\end{center}

\textbf{Code Snippet:}
\begin{lstlisting}[language=C++,caption={Arduino Code}]
#include <ESP8266WiFi.h>
#include <DHT.h>
#define DHT_PIN D4
// Setup and Loop to read temp and publish via MQTT
float temp = dht.readTemperature();
client.publish("sensor/data", String(temp).c_str());
\end{lstlisting}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{HSCDP - Hardware Software Cloud Data Platform}
\end{mnemonicbox}

\questionmarks{4(a OR)}{3}{List types of sensors used in IoT applications.}

\begin{solutionbox}
\textbf{IoT Sensor Types:}

\begin{center}
\captionof{table}{Sensor Types}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Sensor Type} & \textbf{Measurement} \\ \hline
\textbf{Temperature} & Ambient and surface temperature \\ \hline
\textbf{Motion/PIR} & Movement and presence detection \\ \hline
\textbf{Light/LDR} & Ambient light intensity \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{TML - Temperature Motion Light}
\end{mnemonicbox}

\questionmarks{4(b OR)}{4}{Discuss security challenges in IoT systems.}

\begin{solutionbox}
\textbf{IoT Security Challenges:}

\begin{itemize}
    \item \textbf{Device-Level}: Weak authentication, firmware vulnerabilities.
    \item \textbf{Network-Level}: Unencrypted communication, Man-in-the-Middle.
    \item \textbf{Cloud-Level}: Data privacy, API security, Data breaches.
\end{itemize}

\begin{center}
\captionof{table}{Solutions}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Challenge} & \textbf{Solution} \\ \hline
\textbf{Weak Authentication} & Strong passwords, Multi-factor auth \\ \hline
\textbf{Data Transmission} & End-to-end encryption (TLS/SSL) \\ \hline
\textbf{Firmware} & Secure OTA updates \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DNCI - Device Network Cloud Identity}
\end{mnemonicbox}

\questionmarks{4(c OR)}{7}{Draw block diagram to control bulb using Raspberry Pi via mobile app and explain blocks.}

\begin{solutionbox}
\textbf{Smart Bulb Control System:}

\begin{center}
\begin{tikzpicture}[node distance=2cm, auto]
    \node [gtu block] (app) {Mobile App};
    \node [gtu block, right of=app] (router) {Router};
    \node [gtu block, right of=router] (pi) {Raspberry Pi};
    \node [gtu block, right of=pi] (relay) {Relay};
    \node [gtu block, right of=relay] (bulb) {AC Bulb};

    \path [gtu arrow] (app) -- (router);
    \path [gtu arrow] (router) -- (pi);
    \path [gtu arrow] (pi) -- (relay);
    \path [gtu arrow] (relay) -- (bulb);
\end{tikzpicture}
\captionof{figure}{Control Flow}
\end{center}

\textbf{System Operation Flow:}
\begin{itemize}
    \item \textbf{Tap ON}: App sends HTTP request -> Web Server (Pi) -> GPIO HIGH -> Relay ON -> Bulb ON.
    \item \textbf{Tap OFF}: App sends HTTP request -> Web Server (Pi) -> GPIO LOW -> Relay OFF -> Bulb OFF.
\end{itemize}

\textbf{Hardware Connections:}
\begin{itemize}
    \item \textbf{Raspberry Pi}: GPIO 18, 5V, GND connected to Relay.
    \item \textbf{Relay}: Controls Live wire of AC circuit.
    \item \textbf{Safety}: Optocoupler isolation in relay module.
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{MIHRBA - Mobile Internet Home-router Raspberry-pi Relay Bulb}
\end{mnemonicbox}

\questionmarks{5(a)}{3}{Classify IoT applications into broad categories.}

\begin{solutionbox}
\textbf{IoT Application Categories:}

\begin{center}
\captionof{table}{Categories}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Category} & \textbf{Description} \\ \hline
\textbf{Consumer IoT} & Smart homes, wearables, entertainment \\ \hline
\textbf{Industrial IoT} & Manufacturing, supply chain, predictive maintenance \\ \hline
\textbf{Infrastructure IoT} & Smart cities, transportation, utilities \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{CII - Consumer Industrial Infrastructure}
\end{mnemonicbox}

\questionmarks{5(b)}{4}{Explain the working of a smart home automation system using IoT.}

\begin{solutionbox}
\textbf{Smart Home Automation System:}

\begin{center}
\begin{tikzpicture}[node distance=2.5cm, auto]
    \node [gtu block] (hub) {Central Hub};
    \node [gtu block, left of=hub] (sensor) {Sensors\\(Input)};
    \node [gtu block, right of=hub] (actuator) {Actuators\\(Output)};
    \node [gtu block, below of=hub] (cloud) {Cloud\\Services};
    \node [gtu block, left of=cloud] (app) {Mobile App};

    \path [gtu arrow] (sensor) -- (hub);
    \path [gtu arrow] (hub) -- (actuator);
    \path [gtu arrow] (hub) edge [latex-latex] (cloud);
    \path [gtu arrow] (cloud) edge [latex-latex] (app);
\end{tikzpicture}
\captionof{figure}{Automation System}
\end{center}

\textbf{Benefits:}
\begin{itemize}
    \item \textbf{Energy Efficiency}: 20-30\% reduction.
    \item \textbf{Security}: Real-time alerts.
    \item \textbf{Convenience}: Voice commands.
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{HCSA - Hub Communication Sensors Actuators}
\end{mnemonicbox}

\questionmarks{5(c)}{7}{Propose a block diagram and working principle for an IoT-based healthcare monitoring system.}

\begin{solutionbox}
\textbf{IoT Healthcare Monitoring System:}

\begin{center}
\begin{tikzpicture}[node distance=2.5cm, auto]
    \node [gtu block] (wear) {Wearables};
    \node [gtu block, right of=wear] (phone) {Smartphone};
    \node [gtu block, right of=phone] (cloud) {Cloud\\Platform};
    \node [gtu block, below of=cloud] (analytics) {Analytics\\AI};
    \node [gtu block, left of=analytics] (ui) {Doctor/Patient\\Dashboard};

    \path [gtu arrow] (wear) -- (phone);
    \path [gtu arrow] (phone) -- (cloud);
    \path [gtu arrow] (cloud) -- (analytics);
    \path [gtu arrow] (analytics) -- (ui);
    
    % Feedback loop
    \path [gtu arrow, dashed] (ui) -| (phone);
\end{tikzpicture}
\captionof{figure}{Healthcare Architecture}
\end{center}

\textbf{Detailed Components:}
\begin{enumerate}
    \item \textbf{Patient Devices}: Smartwatch, BP Monitor, Smart Patches.
    \item \textbf{Communication}: BLE to Phone, WiFi/Cellular to Cloud.
    \item \textbf{Cloud Infrastructure}: HIPAA compliant storage, Real-time processing.
    \item \textbf{Analytics}: Vital signs analysis, predictive alerts.
    \item \textbf{Interfaces}: Patient App, Doctor Portal, Emergency Dashboard.
\end{enumerate}

\textbf{Working Principle:}
\begin{itemize}
    \item \textbf{Collection}: Vital signs every 15-30s.
    \item \textbf{Analysis}: ML algorithms check for anomalies.
    \item \textbf{Response}: Alerts sent to doctors/family if critical.
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{WHDCA-UI - Wearables Home-devices Data Communication Analytics User-interface}
\end{mnemonicbox}

\questionmarks{5(a OR)}{3}{List three real-world IoT applications.}

\begin{solutionbox}
\textbf{Real-World IoT Applications:}

\begin{center}
\captionof{table}{Applications}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Application} & \textbf{Description} \\ \hline
\textbf{Smart Agriculture} & Automated irrigation \\ \hline
\textbf{Industrial Monitoring} & Predictive maintenance \\ \hline
\textbf{Smart Transportation} & Traffic management \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{AIT - Agriculture Industrial Transportation}
\end{mnemonicbox}

\questionmarks{5(b OR)}{4}{Describe the role of IoT in a smart parking system.}

\begin{solutionbox}
\textbf{Smart Parking System:}
\begin{itemize}
    \item \textbf{Sensors}: Detect vehicle presence.
    \item \textbf{Cloud}: Calculates availability.
    \item \textbf{App}: Shows empty spots to drivers.
\end{itemize}

\textbf{Benefits:}
\begin{itemize}
    \item Real-time availability updates.
    \item Automated payments.
    \item Reduced fuel consumption (searching).
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DCPN - Detection Collection Processing Notification}
\end{mnemonicbox}

\questionmarks{5(c OR)}{7}{Draw Architecture block diagram of Raspberry Pi and explain it.}

\begin{solutionbox}
\textbf{Raspberry Pi 4B Architecture:}

\begin{center}
\begin{tikzpicture}[node distance=2.5cm, auto]
    \node [gtu block, minimum width=3cm] (soc) {SoC BCM2711\\(CPU+GPU)};
    \node [gtu block, above of=soc] (ram) {LPDDR4 RAM};
    \node [gtu block, below of=soc] (power) {Power Mgmt};
    \node [gtu block, left of=soc] (io) {USB/Ethernet};
    \node [gtu block, right of=soc] (gpio) {GPIO/Camera};

    \path [gtu arrow] (soc) -- (ram);
    \path [gtu arrow] (power) -- (soc);
    \path [gtu arrow] (soc) -- (io);
    \path [gtu arrow] (soc) -- (gpio);
\end{tikzpicture}
\captionof{figure}{Simplified Architecture}
\end{center}

\textbf{Detailed Components:}
\begin{enumerate}
    \item \textbf{CPU}: Quad-core ARM Cortex-A72 (1.5 GHz).
    \item \textbf{GPU}: VideoCore VI (4K video support).
    \item \textbf{RAM}: 1GB - 8GB LPDDR4 options.
    \item \textbf{Connectivity}: Gigabit Ethernet, dual-band WiFi, BT 5.0.
    \item \textbf{I/O}: 40-pin GPIO, 2x Micro-HDMI, CSI/DSI ports.
\end{enumerate}

\textbf{Advantages:}
\begin{itemize}
    \item Full Linux OS support.
    \item Rich community ecosystem.
    \item Cost-effective (\$35+).
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{CPU-GPU-SoC-MEM-CONN-IO-PWR-BOOT - Complete Pi Architecture}
\end{mnemonicbox}

\end{document}
