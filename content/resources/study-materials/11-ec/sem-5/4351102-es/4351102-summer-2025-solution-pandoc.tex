\documentclass[10pt,a4paper]{article}
\input{../../../../../../latex-templates/gtu-solutions/preamble.tex}
\input{../../../../../../latex-templates/gtu-solutions/english-boxes.tex}

\begin{document}

\begin{center}
{\Huge\bfseries\color{headcolor} Subject Name Solutions}\\[5pt]
{\LARGE 4351102 -- Summer 2025}\\[3pt]
{\large Semester 1 Study Material}\\[3pt]
{\normalsize\textit{Detailed Solutions and Explanations}}
\end{center}

\vspace{10pt}

\subsection*{Question 1(a) [3 marks]}\label{q1a}

\textbf{State the features of ATmega32.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Feature & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Flash Memory} & 32KB programmable memory \\
\textbf{SRAM} & 2KB internal SRAM \\
\textbf{EEPROM} & 1KB non-volatile data storage \\
\textbf{I/O Pins} & 32 programmable I/O lines \\
\textbf{Timers} & 3 flexible timer/counters \\
\textbf{ADC} & 10-bit 8-channel ADC \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Operating Voltage}: 2.7V to 5.5V range
\item
  \textbf{Clock Speed}: Up to 16 MHz operation
\item
  \textbf{Communication}: USART, SPI, I2C interfaces
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Fast SRAM Enjoys Input Timers And Communication''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 1(b) [4 marks]}\label{q1b}

\textbf{Write criteria for choosing microcontroller.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Criteria & Consideration \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Processing Speed} & Clock frequency requirements \\
\textbf{Memory Size} & Program and data storage needs \\
\textbf{I/O Requirements} & Number of pins needed \\
\textbf{Power Consumption} & Battery life considerations \\
\textbf{Cost} & Budget constraints \\
\textbf{Development Tools} & Compiler and debugger availability \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Application Type}: Real-time vs general purpose
\item
  \textbf{Communication Needs}: Serial, parallel, wireless protocols
\item
  \textbf{Package Size}: Space constraints in final product
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Processing Memory I/O Power Cost Development
Application Communication Package''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 1(c) [7 marks]}\label{q1c}

\textbf{Draw and explain general block diagram of embedded system.}

\begin{solutionbox}

\begin{center}
\textbf{Mermaid Diagram (Code)}
\begin{verbatim}
{Shaded}
{Highlighting}[]
graph TD
    A[Input Devices] {-{-}{} B[Processor/Microcontroller]}
    B {-{-}{} C[Output Devices]}
    B {{-}{-}{} D[Memory]}
    B {{-}{-}{} E[Communication Interface]}
    F[Power Supply] {-{-}{} B}
    G[Clock/Timer] {-{-}{} B}
{Highlighting}
{Shaded}
\end{verbatim}
\end{center}

\textbf{Block Functions}:

\begin{itemize}
\tightlist
\item
  \textbf{Processor}: Central processing unit executing instructions
\item
  \textbf{Memory}: Stores program code and data temporarily
\item
  \textbf{Input Devices}: Sensors, switches providing system input
\item
  \textbf{Output Devices}: Actuators, displays showing results
\item
  \textbf{Communication}: Interfaces for external device connectivity
\item
  \textbf{Power Supply}: Provides stable voltage to all components
\item
  \textbf{Clock/Timer}: Synchronizes system operations and timing
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Processors Memory Input Output Communication Power
Clock''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 1(c OR) [7
marks]}\label{question-1c-or-7-marks}

\textbf{Define real time operating system and explain its
characteristics.}

\begin{solutionbox}

\textbf{Real Time Operating System (RTOS)}: Operating system designed to
process data and events within strict time constraints.

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Characteristic & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Deterministic} & Predictable response times \\
\textbf{Preemptive} & Higher priority tasks interrupt lower ones \\
\textbf{Multitasking} & Multiple tasks run concurrently \\
\textbf{Fast Context Switch} & Quick task switching capability \\
\textbf{Priority Scheduling} & Tasks executed based on priority \\
\textbf{Interrupt Handling} & Efficient interrupt processing \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Hard Real-time}: Missing deadline causes system failure
\item
  \textbf{Soft Real-time}: Missing deadline degrades performance
\item
  \textbf{Time Constraints}: Operations must complete within deadlines
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Deterministic Preemptive Multitasking Fast Priority
Interrupt''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(a) [3 marks]}\label{q2a}

\textbf{Draw pin diagram of ATmega32.}

\begin{solutionbox}

\begin{verbatim}
      +{-{-}{-}U{-}{-}{-}+}
PB0   |1    40| PA0
PB1   |2    39| PA1  
PB2   |3    38| PA2
PB3   |4    37| PA3
PB4   |5    36| PA4
PB5   |6    35| PA5
PB6   |7    34| PA6
PB7   |8    33| PA7
RESET |9    32| AREF
VCC   |10   31| GND
GND   |11   30| AVCC
XTAL2 |12   29| PC7
XTAL1 |13   28| PC6
PD0   |14   27| PC5
PD1   |15   26| PC4
PD2   |16   25| PC3
PD3   |17   24| PC2
PD4   |18   23| PC1
PD5   |19   22| PC0
PD6   |20   21| PD7
      +{-{-}{-}{-}{-}{-}{-}+}
\end{verbatim}

\end{solutionbox}
\begin{mnemonicbox}
``Port B A Reset Vcc Ground Crystal Port D C''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(b) [4 marks]}\label{q2b}

\textbf{Explain status register of ATmega32.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Bit & Name & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Bit 7} & I & Global Interrupt Enable \\
\textbf{Bit 6} & T & Bit Copy Storage \\
\textbf{Bit 5} & H & Half Carry Flag \\
\textbf{Bit 4} & S & Sign Bit \\
\textbf{Bit 3} & V & Overflow Flag \\
\textbf{Bit 2} & N & Negative Flag \\
\textbf{Bit 1} & Z & Zero Flag \\
\textbf{Bit 0} & C & Carry Flag \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{Status Register (SREG)}: Contains arithmetic operation results
\item
  \textbf{Flags Update}: Automatically set/cleared by ALU operations
\item
  \textbf{Conditional Branching}: Used for program flow control
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``I Think Half Sign Overflow Negative Zero Carry''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(c) [7 marks]}\label{q2c}

\textbf{Explain data memory of ATmega32 in detail.}

\begin{solutionbox}

\begin{center}
\textbf{Mermaid Diagram (Code)}
\begin{verbatim}
{Shaded}
{Highlighting}[]
graph TD
    A[Data Memory Space] {-{-}{} B[General Purpose Registers R0{-}R31]}
    A {-{-}{} C[I/O Memory 0x20{-}0x5F]}
    A {-{-}{} D[Extended I/O 0x60{-}0xFF]}
    A {-{-}{} E[Internal SRAM 0x100{-}0x8FF]}
{Highlighting}
{Shaded}
\end{verbatim}
\end{center}

\textbf{Memory Organization}:

\begin{itemize}
\tightlist
\item
  \textbf{General Purpose Registers}: 32 registers (R0-R31) for data
  operations
\item
  \textbf{I/O Memory}: Direct access to peripheral control registers
\item
  \textbf{Extended I/O}: Additional peripheral registers and stack
  pointer
\item
  \textbf{Internal SRAM}: 2KB volatile memory for variables and stack
\item
  \textbf{Address Space}: Linear addressing from 0x00 to 0x8FF
\item
  \textbf{Stack Operation}: Grows downward from high memory addresses
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``General I/O Extended SRAM Address Stack''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(a OR) [3
marks]}\label{question-2a-or-3-marks}

\textbf{Write functions of DDRx, PINx and PORTx registers.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Register & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{DDRx} & Data Direction Register - configures pin as
input/output \\
\textbf{PINx} & Pin Input Register - reads current pin state \\
\textbf{PORTx} & Port Output Register - writes data to output pins \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{DDRx Bit}: 1 = Output, 0 = Input configuration
\item
  \textbf{PINx Read}: Returns actual voltage level on pins
\item
  \textbf{PORTx Write}: Controls output state when pin is output
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Direction Input Output''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(b OR) [4
marks]}\label{question-2b-or-4-marks}

\textbf{Explain different I/O registers associated with EEPROM in AVR.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Register & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{EEARH/EEARL} & EEPROM Address Register (9-bit address) \\
\textbf{EEDR} & EEPROM Data Register \\
\textbf{EECR} & EEPROM Control Register \\
\end{longtable}
}

\textbf{EECR Control Bits}:

\begin{itemize}
\tightlist
\item
  \textbf{EERIE}: EEPROM Ready Interrupt Enable
\item
  \textbf{EEMWE}: EEPROM Master Write Enable\\
\item
  \textbf{EEWE}: EEPROM Write Enable
\item
  \textbf{EERE}: EEPROM Read Enable
\end{itemize}

\textbf{Programming Sequence}: Set address \rightarrow Set data \rightarrow Enable master
write \rightarrow Enable write

\end{solutionbox}
\begin{mnemonicbox}
``Address Data Control Ready Master Write Read''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 2(c OR) [7
marks]}\label{question-2c-or-7-marks}

\textbf{Explain different ways of connecting clock sources to the AVR.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Clock Source & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{External Crystal} & High precision, 1-16MHz \\
\textbf{External RC} & Low cost, moderate precision \\
\textbf{Internal RC} & Built-in 1/8MHz, no external components \\
\textbf{External Clock} & External clock signal input \\
\end{longtable}
}

\begin{center}
\textbf{Mermaid Diagram (Code)}
\begin{verbatim}
{Shaded}
{Highlighting}[]
graph TD
    A[Crystal Oscillator] {-{-}{} D[AVR Microcontroller]}
    B[RC Oscillator] {-{-}{} D}
    C[Internal RC] {-{-}{} D}
    E[External Clock] {-{-}{} D}
{Highlighting}
{Shaded}
\end{verbatim}
\end{center}

\textbf{Clock Configuration}:

\begin{itemize}
\tightlist
\item
  \textbf{Fuse Bits}: CKSEL3:0 and SUT1:0 select clock source
\item
  \textbf{Startup Time}: Different sources have varying startup delays
\item
  \textbf{Frequency Range}: Internal RC provides 1MHz or 8MHz
\item
  \textbf{External Components}: Crystal requires capacitors for
  stability
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Crystal RC Internal External Fuse Startup Frequency
Components''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(a) [3 marks]}\label{q3a}

\textbf{Write function of registers associated with Timer 1.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Register & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{TCNT1H/TCNT1L} & Timer/Counter 1 register (16-bit) \\
\textbf{TCCR1A/TCCR1B} & Timer/Counter 1 Control registers \\
\textbf{ICR1H/ICR1L} & Input Capture register \\
\textbf{OCR1AH/OCR1AL} & Output Compare A register \\
\textbf{OCR1BH/OCR1BL} & Output Compare B register \\
\end{longtable}
}

\begin{itemize}
\tightlist
\item
  \textbf{TIMSK}: Timer Interrupt Mask register
\item
  \textbf{TIFR}: Timer Interrupt Flag register
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Timer Control Input Output Mask Flag''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(b) [4 marks]}\label{q3b}

\textbf{Discuss steps to program Timer0 in Normal mode.}

\begin{solutionbox}

\textbf{Programming Steps}:

\begin{enumerate}
\tightlist
\item
  \textbf{Set Timer Mode}: Configure TCCR0 for Normal mode
\item
  \textbf{Select Prescaler}: Choose clock division ratio
\item
  \textbf{Load Initial Value}: Set TCNT0 register
\item
  \textbf{Enable Interrupts}: Set TOIE0 in TIMSK (if needed)
\item
  \textbf{Start Timer}: Set prescaler bits in TCCR0
\end{enumerate}

\begin{verbatim}
TCCR0 = 0x05;    // Normal mode, prescaler 1024
TCNT0 = 0x00;    // Initial value
TIMSK |= 0x01;   // Enable overflow interrupt
\end{verbatim}

\end{solutionbox}
\begin{mnemonicbox}
``Set Select Load Enable Start''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(c) [7 marks]}\label{q3c}

\textbf{Write a C program to receive bytes of data serially and put them
on PORT A. Set the baud rate at 9600, 8-bit, and 1 stop bit.}

\begin{solutionbox}

\begin{verbatim}
\#include {avr/io.h}

void USART\_Init() \{
    // Set baud rate to 9600 (assuming 8MHz clock)
    UBRRH = 0x00;
    UBRRL = 51;
    
    // Enable receiver
    UCSRB = (1{}RXEN);
    
    // Set frame format: 8 data bits, 1 stop bit
    UCSRC = (1{}URSEL)|(3{}UCSZ0);
\}

unsigned char USART\_Receive() \{
    // Wait for data to be received
    while(!(UCSRA \& (1{}RXC)));
    return UDR;
\}

int main() \{
    DDRA = 0xFF;        // PORTA as output
    USART\_Init();       // Initialize USART
    
    while(1) \{
        PORTA = USART\_Receive();  // Receive and display
    \}
    return 0;
\}
\end{verbatim}

\end{solutionbox}
\begin{mnemonicbox}
``Initialize Receive Display Loop''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(a OR) [3
marks]}\label{question-3a-or-3-marks}

\textbf{Write function of registers associated with Serial Communication
in AVR.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Register & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{UDR} & USART Data Register \\
\textbf{UCSRA} & USART Control and Status Register A \\
\textbf{UCSRB} & USART Control and Status Register B \\
\textbf{UCSRC} & USART Control and Status Register C \\
\textbf{UBRRH/UBRRL} & USART Baud Rate Registers \\
\end{longtable}
}

\textbf{Key Functions}: Data transmission/reception, status monitoring,
control configuration

\end{solutionbox}
\begin{mnemonicbox}
``Data Control Status Baud''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(b OR) [4
marks]}\label{question-3b-or-4-marks}

\textbf{Discuss steps to program AVR to transfer data serially.}

\begin{solutionbox}

\textbf{Programming Steps}:

\begin{enumerate}
\tightlist
\item
  \textbf{Set Baud Rate}: Configure UBRRH/UBRRL registers
\item
  \textbf{Enable Transmitter}: Set TXEN bit in UCSRB
\item
  \textbf{Set Frame Format}: Configure data bits, stop bits in UCSRC
\item
  \textbf{Wait for Empty Buffer}: Check UDRE flag in UCSRA
\item
  \textbf{Load Data}: Write data to UDR register
\end{enumerate}

\begin{verbatim}
void USART\_Transmit(unsigned char data) \{
    while(!(UCSRA \& (1{}UDRE)));  // Wait for empty buffer
    UDR = data;                   // Send data
\}
\end{verbatim}

\end{solutionbox}
\begin{mnemonicbox}
``Baud Enable Format Wait Load''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 3(c OR) [7
marks]}\label{question-3c-or-7-marks}

\textbf{Write a C program to toggle only the PORTB.4 bit continuously
every 2 ms. Use timer 1, Normal mode, and no prescaler to create the
delay. Assume XTAL=8MHz.}

\begin{solutionbox}

\begin{verbatim}
\#include {avr/io.h}
\#include {avr/interrupt.h}

volatile unsigned int timer\_count = 0;

ISR(TIMER1\_OVF\_vect) \{
    timer\_count++;
    if(timer\_count {=} 1) \{  // Approximately 2ms
        PORTB \^{=} (1{}4);    // Toggle PORTB.4
        timer\_count = 0;
        TCNT1 = 49911;      // Reload for 2ms delay
    \}
\}

int main() \{
    DDRB |= (1{}4);         // PORTB.4 as output
    
    // Timer1 Normal mode, no prescaler
    TCCR1A = 0x00;
    TCCR1B = 0x01;          // No prescaler
    
    TCNT1 = 49911;          // Initial value for 2ms
    TIMSK |= (1{}TOIE1);    // Enable Timer1 overflow interrupt
    
    sei();                  // Enable global interrupts
    
    while(1) \{
        // Main loop
    \}
    return 0;
\}
\end{verbatim}

\textbf{Calculation}: For 2ms delay with 8MHz clock: 8MHz \times 2ms = 16000
cycles Timer1 counts: 65536 - 16000 = 49536 (approximately 49911 for
adjustment)

\end{solutionbox}
\begin{mnemonicbox}
``Configure Timer Calculate Enable Loop''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(a) [3 marks]}\label{q4a}

\textbf{Draw interfacing diagram of ULN2803 with ATmega32.}

\begin{solutionbox}

\begin{verbatim}
ATmega32          ULN2803          Load
+{-{-}{-}{-}{-}{-}{-}{-}{-}+      +{-}{-}{-}{-}{-}{-}{-}{-}+      +{-}{-}{-}{-}{-}{-}+}
|   PB0   |{-{-}{-}{-}{-}|   1    |{-}{-}{-}{-}{-}| Relay|}
|   PB1   |{-{-}{-}{-}{-}|   2    |{-}{-}{-}{-}{-}| LED  |}
|   PB2   |{-{-}{-}{-}{-}|   3    |{-}{-}{-}{-}{-}| Motor|}
|   PB3   |{-{-}{-}{-}{-}|   4    |      +{-}{-}{-}{-}{-}{-}+}
|   PB4   |{-{-}{-}{-}{-}|   5    |         |}
|   PB5   |{-{-}{-}{-}{-}|   6    |         |}
|   PB6   |{-{-}{-}{-}{-}|   7    |         |}
|   PB7   |{-{-}{-}{-}{-}|   8    |         |}
|         |      |   9    |{{-}{-}{-}{-}{-}{-}{-}{-}+  +12V}
|   GND   |{-{-}{-}{-}{-}|  10    |}
+{-{-}{-}{-}{-}{-}{-}{-}{-}+      +{-}{-}{-}{-}{-}{-}{-}{-}+}
\end{verbatim}

\textbf{Connection Details}:

\begin{itemize}
\tightlist
\item
  \textbf{Input}: ATmega32 PORTB pins to ULN2803 inputs
\item
  \textbf{Output}: ULN2803 outputs drive high current loads
\item
  \textbf{Common}: Pin 9 connects to positive supply, Pin 10 to ground
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Input Output Common Supply Ground''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(b) [4 marks]}\label{q4b}

\textbf{Write an AVR C program to get a byte of data from Port B, and
then send it to Port C.}

\begin{solutionbox}

\begin{verbatim}
\#include {avr/io.h}

int main() \{
    DDRB = 0x00;    // PORTB as input
    DDRC = 0xFF;    // PORTC as output
    PORTB = 0xFF;   // Enable pull{-up resistors on PORTB}
    
    unsigned char data;
    
    while(1) \{
        data = PINB;     // Read data from PORTB
        PORTC = data;    // Send data to PORTC
    \}
    
    return 0;
\}
\end{verbatim}

\textbf{Program Flow}:

\begin{itemize}
\tightlist
\item
  \textbf{Configure Ports}: Set direction registers
\item
  \textbf{Enable Pull-ups}: Activate internal pull-up resistors
\item
  \textbf{Read Data}: Get byte from PINB register
\item
  \textbf{Write Data}: Output byte to PORTC register
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Configure Enable Read Write''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(c) [7 marks]}\label{q4c}

\textbf{Draw and explain interfacing of MAX7221 with ATmega32.}

\begin{solutionbox}

\begin{verbatim}
ATmega32              MAX7221           7{-Segment Display}
+{-{-}{-}{-}{-}{-}{-}{-}{-}+          +{-}{-}{-}{-}{-}{-}{-}{-}{-}+        +{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}+}
|   PB5   |{-{-}{-}{-}{-}{-}{-}{-}{-}|   DIN   |        |     a       |}
|   PB7   |{-{-}{-}{-}{-}{-}{-}{-}{-}|   CLK   |        |   f   b     |}
|   PB4   |{-{-}{-}{-}{-}{-}{-}{-}{-}|   LOAD  |        |     g       |}
|   VCC   |{-{-}{-}{-}{-}{-}{-}{-}{-}|   VCC   |        |   e   c     |}
|   GND   |{-{-}{-}{-}{-}{-}{-}{-}{-}|   GND   |        |     d   dp  |}
+{-{-}{-}{-}{-}{-}{-}{-}{-}+          |  DIG0{-}7 |{-}{-}{-}{-}{-}{-}{-}+{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}+}
                     | SEG A{-G |}
                     |   DP    |
                     +{-{-}{-}{-}{-}{-}{-}{-}{-}+}
\end{verbatim}

\textbf{Interface Description}:

\begin{itemize}
\tightlist
\item
  \textbf{SPI Communication}: Uses 3-wire SPI protocol
\item
  \textbf{DIN (Data In)}: Serial data input from PB5 (MOSI)
\item
  \textbf{CLK (Clock)}: Clock signal from PB7 (SCK)
\item
  \textbf{LOAD (Chip Select)}: Latch signal from PB4 (SS)
\item
  \textbf{Multiplexed Display}: Controls up to 8 seven-segment digits
\item
  \textbf{Current Control}: Internal current limiting for LEDs
\end{itemize}

\textbf{Programming Steps}: Initialize SPI \rightarrow Send address \rightarrow Send data \rightarrow
Toggle LOAD pin

\end{solutionbox}
\begin{mnemonicbox}
``SPI Data Clock Load Multiplex Current Program''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(a OR) [3
marks]}\label{question-4a-or-3-marks}

\textbf{Draw interfacing diagram of LM35 with ATmega32.}

\begin{solutionbox}

\begin{verbatim}
LM35 Temperature Sensor    ATmega32
+{-{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}+     +{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}+}
|        VCC        |{-{-}{-}{-}|    VCC    |}
|                   |     |           |
|       OUT         |{-{-}{-}{-}|   PA0     | (ADC0)}
|                   |     |           |
|       GND         |{-{-}{-}{-}|   GND     |}
+{-{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}+     +{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}+}
\end{verbatim}

\textbf{Connection Details}:

\begin{itemize}
\tightlist
\item
  \textbf{VCC}: Connect to +5V supply
\item
  \textbf{OUT}: Analog output to ADC channel (PA0)
\item
  \textbf{GND}: Connect to ground
\item
  \textbf{Output}: 10mV/^\circC linear voltage output
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``VCC OUT GND Linear''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(b OR) [4
marks]}\label{question-4b-or-4-marks}

\textbf{Write an AVR C program to monitor bit 5 of port C, if it is
HIGH, send 55H to Port B; otherwise, send AAH to Port B.}

\begin{solutionbox}

\begin{verbatim}
\#include {avr/io.h}

int main() \{
    DDRC \&= {(}1{}5);    // PC5 as input
    DDRB = 0xFF;        // PORTB as output
    PORTC |= (1{}5);    // Enable pull{-up on PC5}
    
    while(1) \{
        if(PINC \& (1{}5)) \{     // Check if bit 5 is HIGH
            PORTB = 0x55;       // Send 55H to PORTB
        \}
        else \{
            PORTB = 0xAA;       // Send AAH to PORTB
        \}
    \}
    
    return 0;
\}
\end{verbatim}

\textbf{Program Logic}:

\begin{itemize}
\tightlist
\item
  \textbf{Monitor Bit}: Check PC5 status using bit masking
\item
  \textbf{Conditional Output}: Send different values based on input
\item
  \textbf{Continuous Loop}: Monitor continuously for changes
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Monitor Conditional Output Loop''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 4(c OR) [7
marks]}\label{question-4c-or-7-marks}

\textbf{Discuss registers used to program SPI in the AVR.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Register & Function \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{SPCR} & SPI Control Register \\
\textbf{SPSR} & SPI Status Register \\
\textbf{SPDR} & SPI Data Register \\
\end{longtable}
}

\textbf{SPCR Control Bits}:

\begin{itemize}
\tightlist
\item
  \textbf{SPIE}: SPI Interrupt Enable
\item
  \textbf{SPE}: SPI Enable
\item
  \textbf{DORD}: Data Order (MSB/LSB first)
\item
  \textbf{MSTR}: Master/Slave Select
\item
  \textbf{CPOL}: Clock Polarity
\item
  \textbf{CPHA}: Clock Phase
\item
  \textbf{SPR1:0}: SPI Clock Rate Select
\end{itemize}

\textbf{SPSR Status Bits}:

\begin{itemize}
\tightlist
\item
  \textbf{SPIF}: SPI Interrupt Flag
\item
  \textbf{WCOL}: Write Collision Flag
\item
  \textbf{SPI2X}: Double SPI Speed
\end{itemize}

\textbf{Programming Sequence}: Configure SPCR \rightarrow Enable SPI \rightarrow Write SPDR
\rightarrow Wait for SPIF \rightarrow Read SPDR

\end{solutionbox}
\begin{mnemonicbox}
``Control Status Data Configure Enable Write Wait
Read''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(a) [3 marks]}\label{q5a}

\textbf{Draw pin diagram of L293D motor driver IC.}

\begin{solutionbox}

\begin{verbatim}
    L293D
   +{-{-}U{-}{-}+}
EN1|1  16|VCC
1A |2  15|4A
1Y |3  14|4Y
GND|4  13|GND
GND|5  12|GND
2Y |6  11|3Y
2A |7  10|3A
VCC|8   9|EN2
   +{-{-}{-}{-}{-}+}
\end{verbatim}

\textbf{Pin Functions}:

\begin{itemize}
\tightlist
\item
  \textbf{EN1, EN2}: Enable pins for motor control
\item
  \textbf{1A, 2A, 3A, 4A}: Input pins from microcontroller
\item
  \textbf{1Y, 2Y, 3Y, 4Y}: Output pins to motors
\item
  \textbf{VCC}: Logic and motor supply voltages
\item
  \textbf{GND}: Ground connections
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Enable Input Output Supply Ground''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(b) [4 marks]}\label{q5b}

\textbf{Draw and explain ADMUX register.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}llllllll@{}}
\toprule\noalign{}
Bit 7 & Bit 6 & Bit 5 & Bit 4 & Bit 3 & Bit 2 & Bit 1 & Bit 0 \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
REFS1 & REFS0 & ADLAR & MUX4 & MUX3 & MUX2 & MUX1 & MUX0 \\
\end{longtable}
}

\textbf{Bit Functions}:

\begin{itemize}
\tightlist
\item
  \textbf{REFS1:0}: Reference Selection (00=AREF, 01=AVCC, 11=Internal
  2.56V)
\item
  \textbf{ADLAR}: ADC Left Adjust Result (data format)
\item
  \textbf{MUX4:0}: Analog Channel Selection (32 possible channels)
\end{itemize}

\textbf{Channel Selection Examples}:

\begin{itemize}
\tightlist
\item
  \textbf{00000}: ADC0 (PA0)
\item
  \textbf{00001}: ADC1 (PA1)
\item
  \textbf{00111}: ADC7 (PA7)
\end{itemize}

\end{solutionbox}
\begin{mnemonicbox}
``Reference Adjust Multiplex Channel''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(c) [7 marks]}\label{q5c}

\textbf{Explain the block diagram of GSM based security system.}

\begin{solutionbox}

\begin{center}
\textbf{Mermaid Diagram (Code)}
\begin{verbatim}
{Shaded}
{Highlighting}[]
graph LR
    A[Sensors] {-{-}{} B[Microcontroller]}
    B {-{-}{} C[GSM Module]}
    C {-{-}{} D[Mobile Network]}
    D {-{-}{} E[User Mobile]}
    B {-{-}{} F[Alarm System]}
    B {-{-}{} G[Display Unit]}
    H[Power Supply] {-{-}{} B}
    H {-{-}{} C}
{Highlighting}
{Shaded}
\end{verbatim}
\end{center}

\textbf{System Components}:

\begin{itemize}
\tightlist
\item
  \textbf{Sensors}: PIR, door/window sensors detect intrusion
\item
  \textbf{Microcontroller}: Processes sensor data and controls system
\item
  \textbf{GSM Module}: Sends SMS/calls to registered numbers
\item
  \textbf{Mobile Network}: Connects to cellular infrastructure
\item
  \textbf{Alarm System}: Local audio/visual alerts
\item
  \textbf{Display Unit}: Shows system status and messages
\item
  \textbf{Power Supply}: Battery backup for continuous operation
\end{itemize}

\textbf{Operation Flow}: Sensor detects \rightarrow Microcontroller processes \rightarrow
GSM sends alert \rightarrow User receives notification \rightarrow Alarm activates

\end{solutionbox}
\begin{mnemonicbox}
``Sensors Microcontroller GSM Mobile Alarm Display
Power Operation''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(a OR) [3
marks]}\label{question-5a-or-3-marks}

\textbf{Draw circuit diagram to interface DC motor with ATmega32 using
L293D motor driver.}

\begin{solutionbox}

\begin{verbatim}
ATmega32      L293D        DC Motor
+{-{-}{-}{-}{-}{-}{-}{-}{-}+  +{-}{-}{-}{-}{-}{-}+     +{-}{-}{-}{-}{-}{-}{-}+}
|   PB0   |{-|EN1   |     |   M   |}
|   PB1   |{-|1A    |     |   O   |}
|   PB2   |{-|2A  1Y|{-}{-}{-}{-}|   T   |}
|         |  |    2Y|{-{-}{-}{-}|   O   |}
|   VCC   |{-|VCC   |     |   R   |}
|   GND   |{-|GND   |     +{-}{-}{-}{-}{-}{-}{-}+}
+{-{-}{-}{-}{-}{-}{-}{-}{-}+  +{-}{-}{-}{-}{-}{-}+}
\end{verbatim}

\textbf{Connections}:

\begin{itemize}
\tightlist
\item
  \textbf{PB0 \rightarrow EN1}: Enable motor operation
\item
  \textbf{PB1 \rightarrow 1A, PB2 \rightarrow 2A}: Direction control inputs
\item
  \textbf{1Y, 2Y \rightarrow Motor}: Output to motor terminals
\item
  \textbf{VCC, GND}: Power supply connections
\end{itemize}

\textbf{Motor Control}: Different input combinations on 1A, 2A control
motor direction and speed

\end{solutionbox}
\begin{mnemonicbox}
``Enable Direction Output Power Control''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(b OR) [4
marks]}\label{question-5b-or-4-marks}

\textbf{Draw and explain ADCSRA register.}

\begin{solutionbox}

{\def\LTcaptype{none} % do not increment counter
\begin{longtable}[]{@{}llllllll@{}}
\toprule\noalign{}
Bit 7 & Bit 6 & Bit 5 & Bit 4 & Bit 3 & Bit 2 & Bit 1 & Bit 0 \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
ADEN & ADSC & ADATE & ADIF & ADIE & ADPS2 & ADPS1 & ADPS0 \\
\end{longtable}
}

\textbf{Bit Functions}:

\begin{itemize}
\tightlist
\item
  \textbf{ADEN}: ADC Enable
\item
  \textbf{ADSC}: ADC Start Conversion
\item
  \textbf{ADATE}: ADC Auto Trigger Enable
\item
  \textbf{ADIF}: ADC Interrupt Flag
\item
  \textbf{ADIE}: ADC Interrupt Enable
\item
  \textbf{ADPS2:0}: ADC Prescaler Select (division factor)
\end{itemize}

\textbf{Prescaler Settings}: 000=2, 001=2, 010=4, 011=8, 100=16, 101=32,
110=64, 111=128

\textbf{Programming}: Set ADEN \rightarrow Configure prescaler \rightarrow Set ADSC \rightarrow Wait
for ADIF

\end{solutionbox}
\begin{mnemonicbox}
``Enable Start Auto Interrupt Prescaler Configure''

\end{mnemonicbox}
\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection*{Question 5(c OR) [7
marks]}\label{question-5c-or-7-marks}

\textbf{Explain the block diagram of Weather monitoring system.}

\begin{solutionbox}

\begin{center}
\textbf{Mermaid Diagram (Code)}
\begin{verbatim}
{Shaded}
{Highlighting}[]
graph TD
    A[Temperature Sensor] {-{-}{} E[Microcontroller]}
    B[Humidity Sensor] {-{-}{} E}
    C[Pressure Sensor] {-{-}{} E}
    D[Rain Sensor] {-{-}{} E}
    E {-{-}{} F[LCD Display]}
    E {-{-}{} G[Data Logger]}
    E {-{-}{} H[Wireless Module]}
    H {-{-}{} I[Remote Monitoring]}
    J[Power Supply] {-{-}{} E}
    E {-{-}{} K[Alarm System]}
{Highlighting}
{Shaded}
\end{verbatim}
\end{center}

\textbf{System Components}:

\begin{itemize}
\tightlist
\item
  \textbf{Temperature Sensor}: Measures ambient temperature
  (LM35/DS18B20)
\item
  \textbf{Humidity Sensor}: Monitors moisture content (DHT22)
\item
  \textbf{Pressure Sensor}: Detects atmospheric pressure changes
\item
  \textbf{Rain Sensor}: Detects precipitation levels
\item
  \textbf{Microcontroller}: Central processing unit for data collection
\item
  \textbf{LCD Display}: Local visual data presentation
\item
  \textbf{Data Logger}: Stores historical weather data
\item
  \textbf{Wireless Module}: Transmits data to remote locations
\item
  \textbf{Alarm System}: Alerts for extreme weather conditions
\end{itemize}

\textbf{Operation}: Sensors collect data \rightarrow Microcontroller processes \rightarrow
Display updates \rightarrow Data logging \rightarrow Wireless transmission \rightarrow Alert
generation

\end{solutionbox}
\begin{mnemonicbox}
``Temperature Humidity Pressure Rain Microcontroller
Display Logger Wireless Alarm Operation''

\end{mnemonicbox}

\end{document}
