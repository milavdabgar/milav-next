\documentclass{article}
% Adjust the relative path to point to the latex-templates directory
% Example (for files deep in content/resources/...): 
% Absolute paths for template files
\input{../../../../../../../latex-templates/gtu-solutions-short/preamble.tex}
\input{../../../../../../../latex-templates/gtu-solutions-short/english-boxes.tex}
\input{../../../../../../../latex-templates/gtu-solutions-short/commands.tex}

\title{Database Management (4331603) - Summer 2025 Solution}
\date{May 15, 2025}

\begin{document}
\maketitle

\questionmarks{1(a)}{3}{Define the following terms. 1) Metadata 2) Schema 3) Data dictionary.}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{Database Terms}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Term} & \textbf{Definition} \\ \hline
\textbf{Metadata} & Data about data that describes structure, format, and characteristics of database \\ \hline
\textbf{Schema} & Logical structure describing database organization and relationships \\ \hline
\textbf{Data Dictionary} & Centralized repository storing information about database elements \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Metadata}: Information describing data characteristics and properties
    \item \keyword{Schema}: Blueprint defining database structure and constraints
    \item \keyword{Data Dictionary}: Catalog of all database objects and their attributes
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{MSD - My System Dictionary}
\end{mnemonicbox}

\questionmarks{1(b)}{4}{Write down advantages of Database Management system.}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{DBMS Advantages}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Advantage} & \textbf{Description} \\ \hline
\textbf{Data Independence} & Applications independent of data storage \\ \hline
\textbf{Data Integrity} & Maintains accuracy and consistency \\ \hline
\textbf{Security Control} & User authentication and authorization \\ \hline
\textbf{Concurrent Access} & Multiple users access simultaneously \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Reduced Redundancy}: Eliminates duplicate data storage
    \item \keyword{Centralized Control}: Single point of data management
    \item \keyword{Data Sharing}: Multiple applications can use same data
    \item \keyword{Backup Recovery}: Automatic data protection mechanisms
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DISC-RCDB - Database Is Super Cool}
\end{mnemonicbox}

\questionmarks{1(c)}{7}{Explain Responsibilities of DBA.}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{DBA Responsibilities}
\begin{tabulary}{\linewidth}{|L|L|}
\hline
\textbf{Responsibility} & \textbf{Tasks} \\ \hline
\textbf{Database Design} & Create logical and physical structures \\ \hline
\textbf{Security Management} & Control user access and permissions \\ \hline
\textbf{Performance Tuning} & Optimize queries and database operations \\ \hline
\textbf{Backup Recovery} & Ensure data protection and restoration \\ \hline
\textbf{User Management} & Create accounts and assign privileges \\ \hline
\end{tabulary}
\end{center}

\begin{center}
\begin{tikzpicture}[node distance=1.5cm, auto, thick]
    \node [gtu root] (Root) {DBA Responsibilities};
    
    \node [gtu child, below left=1.5cm and 1cm of Root] (Sec) {Security Management};
    \node [gtu child, left=0.5cm of Sec] (Des) {Database Design};
    
    \node [gtu child, below right=1.5cm and 1cm of Root] (Back) {Backup \& Recovery};
    \node [gtu child, right=0.5cm of Back] (User) {User Management};
    
    \node [gtu child, below=1.5cm of Root] (Perf) {Performance Tuning};
    
    \draw [gtu arrow] (Root) -- (Des);
    \draw [gtu arrow] (Root) -- (Sec);
    \draw [gtu arrow] (Root) -- (Perf);
    \draw [gtu arrow] (Root) -- (Back);
    \draw [gtu arrow] (Root) -- (User);
\end{tikzpicture}
\captionof{figure}{Key Responsibilities of DBA}
\end{center}

\begin{itemize}
    \item \keyword{Database Installation}: Setup and configure DBMS software
    \item \keyword{Data Migration}: Transfer data between systems safely
    \item \keyword{Documentation}: Maintain database schemas and procedures
    \item \keyword{Monitoring}: Track system performance and resource usage
    \item \keyword{Troubleshooting}: Resolve database issues and errors
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DSPBU-DMT - DBA Solves Problems By Understanding Database Management Tasks}
\end{mnemonicbox}

\questionmarks{1(c OR)}{7}{What is data abstraction? Explain three level ANSI SPARC architecture in detail.}

\begin{solutionbox}
\textbf{Data Abstraction}: Hiding complex database implementation details from users while providing simplified interfaces.

\begin{center}
\begin{tikzpicture}[node distance=1.5cm, auto, thick]
    % Levels
    \node [gtu block, fill=red!10, minimum width=6cm] (Ext) {External Level (User Views)};
    \node [gtu block, fill=blue!10, minimum width=6cm, below=1cm of Ext] (Con) {Conceptual Level (Logical Schema)};
    \node [gtu block, fill=green!10, minimum width=6cm, below=1cm of Con] (Int) {Internal Level (Physical Storage)};
    
    % Users
    \node [above=0.8cm of Ext] (Users) {End Users / Applications};
    
    % Connections
    \draw [gtu arrow] (Users) -- (Ext);
    \draw [gtu arrow] (Ext) -- (Con);
    \draw [gtu arrow] (Con) -- (Int);
    
    % Labels (Mapping)
    \node [right=0.5cm of Ext, font=\small] {External-Conceptual Mapping};
    \node [right=0.5cm of Con, font=\small] {Conceptual-Internal Mapping};
\end{tikzpicture}
\captionof{figure}{Three Level ANSI SPARC Architecture}
\end{center}

\textbf{Table:}
\begin{center}
\captionof{table}{Architecture Levels}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Level} & \textbf{Description} & \textbf{Users} \\ \hline
\textbf{External Level} & Individual user views and applications & End Users \\ \hline
\textbf{Conceptual Level} & Complete logical database structure & Database Designers \\ \hline
\textbf{Internal Level} & Physical storage and access methods & System Programmers \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{External Level}: Multiple user views hiding complexity
    \item \keyword{Conceptual Level}: Complete database schema without storage details
    \item \keyword{Internal Level}: Physical file organization and indexing
    \item \keyword{Data Independence}: Changes at one level don't affect others
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{ECI - Every Computer Implements}
\end{mnemonicbox}

\questionmarks{2(a)}{3}{Differentiate Schema vs Instance}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{Schema vs Instance}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Aspect} & \textbf{Schema} & \textbf{Instance} \\ \hline
\textbf{Definition} & Database structure blueprint & Actual data at specific time \\ \hline
\textbf{Nature} & Static logical design & Dynamic data content \\ \hline
\textbf{Changes} & Rarely modified & Frequently updated \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Schema}: Describes database organization and constraints
    \item \keyword{Instance}: Snapshot of database content at particular moment
    \item \keyword{Relationship}: Schema defines structure, instance contains data
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SI - Structure vs Information}
\end{mnemonicbox}

\questionmarks{2(b)}{4}{Explain Specialization with example.}

\begin{solutionbox}
\textbf{Specialization}: Process of creating subclasses from superclass based on specific characteristics.

\begin{center}
\begin{tikzpicture}[node distance=2cm, auto, thick]
    % Entities
    \node [gtu block] (Emp) {EMPLOYEE};
    
    \node [gtu decision, below=1cm of Emp] (IsA) {IS-A};
    
    \node [gtu block, below left=1.5cm and 1cm of IsA] (Mgr) {MANAGER};
    \node [gtu block, below right=1.5cm and 1cm of IsA] (Dev) {DEVELOPER};
    
    % Connections
    \draw [thick] (Emp) -- (IsA);
    \draw [thick] (IsA) -| (Mgr);
    \draw [thick] (IsA) -| (Dev);
    
    % Attributes (Sample)
    \node [ellipse, draw, right=0.5cm of Emp, font=\footnotesize] {Salary};
    \node [ellipse, draw, left=0.5cm of Mgr, font=\footnotesize] {TeamSize};
    \node [ellipse, draw, right=0.5cm of Dev, font=\footnotesize] {Project};
\end{tikzpicture}
\captionof{figure}{Specialization Hierarchy}
\end{center}

\begin{itemize}
    \item \keyword{Top-Down Approach}: From general entity to specific entities
    \item \keyword{Inheritance}: Subclasses inherit superclass attributes
    \item \keyword{Disjoint}: Manager and Developer are separate categories
    \item \keyword{Example}: Employee specialized into Manager and Developer
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{STID - Specialization Takes Inheritance Down}
\end{mnemonicbox}

\questionmarks{2(c)}{7}{What is ER diagram? Explain different symbols used in E-R diagram with example.}

\begin{solutionbox}
\textbf{ER Diagram}: Graphical representation showing entities, attributes, and relationships in database design.

\textbf{Table:}
\begin{center}
\captionof{table}{ER Diagram Symbols}
\begin{tabulary}{\linewidth}{|L|L|L|L|}
\hline
\textbf{Symbol} & \textbf{Shape} & \textbf{Purpose} & \textbf{Example} \\ \hline
\textbf{Entity} & Rectangle & Real-world object & Student, Course \\ \hline
\textbf{Attribute} & Oval & Entity properties & Name, Age, ID \\ \hline
\textbf{Relationship} & Diamond & Entity connections & Enrolls, Takes \\ \hline
\textbf{Primary Key} & Underlined oval & Unique identifier & Student\_ID \\ \hline
\end{tabulary}
\end{center}

\begin{center}
\begin{tikzpicture}[node distance=2cm, auto, thick]
    % Entity: Student
    \node [gtu block] (Student) {Student};
    
    % Attributes
    \node [ellipse, draw, above left=1cm of Student] (Sid) {\underline{student\_id}};
    \node [ellipse, draw, above=1cm of Student] (Name) {name};
    \node [ellipse, draw, above right=1cm of Student] (Email) {email};
    
    % Entity: Course
    \node [gtu block, right=4cm of Student] (Course) {Course};
    \node [ellipse, draw, above=1cm of Course] (Cid) {\underline{course\_id}};
    
    % Relationship
    \node [gtu decision, between=Student and Course] (Enrolls) {Enrolls};
    
    % Edges
    \draw (Student) -- (Sid);
    \draw (Student) -- (Name);
    \draw (Student) -- (Email);
    \draw (Course) -- (Cid);
    
    \draw (Student) -- node[above] {M} (Enrolls);
    \draw (Enrolls) -- node[above] {N} (Course);
\end{tikzpicture}
\captionof{figure}{ER Diagram Example}
\end{center}

\begin{itemize}
    \item \keyword{Entity Sets}: Collection of similar entities with same attributes
    \item \keyword{Weak Entity}: Depends on strong entity for identification
    \item \keyword{Cardinality}: Defines relationship participation (1:1, 1:M, M:N)
    \item \keyword{Participation}: Total (double line) or Partial (single line)
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{EARP - Entities And Relationships Program}
\end{mnemonicbox}

\questionmarks{2(a OR)}{3}{Differentiate DA vs DBA.}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{DA vs DBA}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Aspect} & \textbf{Data Administrator (DA)} & \textbf{Database Administrator (DBA)} \\ \hline
\textbf{Focus} & Data policies and standards & Technical database operations \\ \hline
\textbf{Level} & Strategic planning & Operational implementation \\ \hline
\textbf{Scope} & Organization-wide data & Specific database systems \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{DA}: Manages data as organizational resource
    \item \keyword{DBA}: Handles technical database maintenance and performance
    \item \keyword{Collaboration}: DA sets policies, DBA implements them
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DA-DBA: Design Authority - Database Builder Administrator}
\end{mnemonicbox}

\questionmarks{2(b OR)}{4}{Explain Generalization with example.}

\begin{solutionbox}
\textbf{Generalization}: Bottom-up process combining similar entities into common superclass.

\begin{center}
\begin{tikzpicture}[node distance=2cm, auto, thick]
    % Superclass
    \node [gtu block] (Vehicle) {VEHICLE};
    
    % Relationship
    \node [gtu decision, below=1cm of Vehicle] (IsA) {IS-A};
    
    % Subclasses
    \node [gtu block, below left=1.5cm and 1cm of IsA] (Car) {CAR};
    \node [gtu block, below right=1.5cm and 1cm of IsA] (Bike) {MOTORCYCLE};
    
    % Arrows (pointing UP for Generalization conceptually, but IS-A links usually drawn same way)
    % Convention: Triangle pointing to Super for Generalization
    
    % Connections
    \draw [thick] (Vehicle) -- (IsA);
    \draw [thick] (IsA) -| (Car);
    \draw [thick] (IsA) -| (Bike);
    
    % Attributes
    \node [ellipse, draw, right=0.5cm of Vehicle, font=\footnotesize] {Brand};
    \node [ellipse, draw, left=0.5cm of Car, font=\footnotesize] {Doors};
    \node [ellipse, draw, right=0.5cm of Bike, font=\footnotesize] {EngineCC};
\end{tikzpicture}
\captionof{figure}{Generalization Hierarchy}
\end{center}

\begin{itemize}
    \item \keyword{Bottom-Up Approach}: From specific entities to general entity
    \item \keyword{Common Attributes}: Shared properties moved to superclass
    \item \keyword{Specialization Reverse}: Opposite of specialization process
    \item \keyword{Example}: Car and Motorcycle generalized into Vehicle
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{GBCS - Generalization Brings Common Superclass}
\end{mnemonicbox}

\questionmarks{2(c OR)}{7}{What is attribute? Explain different types of attributes with example.}

\begin{solutionbox}
\textbf{Attribute}: Property or characteristic that describes an entity.

\textbf{Table:}
\begin{center}
\captionof{table}{Attribute Types}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Attribute Type} & \textbf{Description} & \textbf{Example} \\ \hline
\textbf{Simple} & Cannot be divided further & Age, Name \\ \hline
\textbf{Composite} & Can be subdivided & Address (Street, City, ZIP) \\ \hline
\textbf{Single-valued} & One value per entity & Student\_ID \\ \hline
\textbf{Multi-valued} & Multiple values possible & Phone\_numbers \\ \hline
\textbf{Derived} & Calculated from other attributes & Age from Birth\_date \\ \hline
\end{tabulary}
\end{center}

\begin{center}
\begin{tikzpicture}[level/.style={sibling distance=25mm, level distance=20mm}, auto, thick]
    \node [gtu root] {Attributes}
        child {node [gtu child] {Simple}
             child {node [gtu state, fill=white] {Name}}
        }
        child {node [gtu child] {Composite}
             child {node [gtu state, fill=white] {Address}
                child {node [gtu state, fill=white] {City}}
                child {node [gtu state, fill=white] {ZIP}}
             }
        }
        child {node [gtu child] {Multi-valued}
             child {node [gtu state, double, fill=white] {Phone}}
        }
        child {node [gtu child] {Derived}
             child {node [gtu state, dashed, fill=white] {Age}}
        };
\end{tikzpicture}
\captionof{figure}{Types of Attributes}
\end{center}

\begin{itemize}
    \item \keyword{Key Attribute}: Uniquely identifies entity instances
    \item \keyword{Null Values}: Attributes that may have no value
    \item \keyword{Default Values}: Predetermined values when not specified
    \item \keyword{Constraints}: Rules governing attribute values
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SCSMD-K - Simple Composite Single Multi Derived Key}
\end{mnemonicbox}

\questionmarks{3(a)}{3}{Explain the GRANT and REVOKE statement in SQL.}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{GRANT and REVOKE}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Statement} & \textbf{Purpose} & \textbf{Syntax Example} \\ \hline
\textbf{GRANT} & Provides privileges to users & GRANT SELECT ON table TO user \\ \hline
\textbf{REVOKE} & Removes user privileges & REVOKE INSERT ON table FROM user \\ \hline
\end{tabulary}
\end{center}

\begin{lstlisting}[language=SQL]
-- Grant privileges
GRANT SELECT, INSERT ON employees TO john;
GRANT ALL PRIVILEGES ON database TO admin;

-- Revoke privileges  
REVOKE DELETE ON employees FROM john;
REVOKE ALL ON database FROM user;
\end{lstlisting}

\begin{itemize}
    \item \keyword{Privileges}: SELECT, INSERT, UPDATE, DELETE, ALL
    \item \keyword{Objects}: Tables, views, databases, procedures
    \item \keyword{Security}: Controls data access and modification rights
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{GR - Grant Rights, Remove Rights}
\end{mnemonicbox}

\questionmarks{3(b)}{4}{Explain following Character functions. 1) INITCAP 2) SUBSTR}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{Character Functions}
\begin{tabulary}{\linewidth}{|L|L|L|L|}
\hline
\textbf{Function} & \textbf{Purpose} & \textbf{Syntax} & \textbf{Example} \\ \hline
\textbf{INITCAP} & Capitalizes first letter of each word & INITCAP(string) & INITCAP('hello world') = 'Hello World' \\ \hline
\textbf{SUBSTR} & Extracts substring from string & SUBSTR(string, start, length) & SUBSTR('Database', 1, 4) = 'Data' \\ \hline
\end{tabulary}
\end{center}

\begin{lstlisting}[language=SQL]
-- INITCAP examples
SELECT INITCAP('database management') FROM dual; -- Database Management
SELECT INITCAP('gtu university') FROM dual; -- Gtu University

-- SUBSTR examples  
SELECT SUBSTR('Programming', 1, 7) FROM dual; -- Program
SELECT SUBSTR('Database', 5) FROM dual; -- base
\end{lstlisting}

\begin{itemize}
    \item \keyword{INITCAP}: Converts string to proper case format
    \item \keyword{SUBSTR}: Parameters are string, starting position, optional length
    \item \keyword{Usage}: Text formatting and string manipulation operations
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{IS - Initialize String, Split String}
\end{mnemonicbox}

\questionmarks{3(c)}{7}{Consider following tables and write answers for the given queries. stud\_master (enroll\_no, name, city, dept)}

\begin{solutionbox}
\begin{lstlisting}[language=SQL]
-- 1. Display all student details who study in IT dept
SELECT * FROM stud_master 
WHERE dept = 'IT';

-- 2. Retrieve all information about name where name begins with 'p'
SELECT * FROM stud_master 
WHERE name LIKE 'p%';

-- 3. Insert new student to table
INSERT INTO stud_master (enroll_no, name, city, dept) 
VALUES ('202501', 'John Smith', 'Mumbai', 'CS');

-- 4. Add new column gender to table stud_master
ALTER TABLE stud_master 
ADD gender VARCHAR(10);

-- 5. Count number of rows for stud_master table
SELECT COUNT(*) FROM stud_master;

-- 6. Display all student details in descending order of enroll_no
SELECT * FROM stud_master 
ORDER BY enroll_no DESC;

-- 7. Destroy table stud_master along with data
DROP TABLE stud_master;
\end{lstlisting}

\textbf{Table:}
\begin{center}
\captionof{table}{SQL Commands Used}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Query Type} & \textbf{SQL Command} & \textbf{Purpose} \\ \hline
\textbf{SELECT} & Retrieves data & Display records \\ \hline
\textbf{INSERT} & Adds new data & Create records \\ \hline
\textbf{ALTER} & Modifies structure & Add columns \\ \hline
\textbf{COUNT} & Aggregate function & Count rows \\ \hline
\end{tabulary}
\end{center}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SIAC-DOC - SQL Is A Complete Database Operations Collection}
\end{mnemonicbox}

\questionmarks{3(a OR)}{3}{Explain equi join with example in SQL.}

\begin{solutionbox}
\textbf{Equi Join}: Join operation using equality condition to combine tables based on common columns.

\begin{lstlisting}[language=SQL]
-- Equi Join example
SELECT s.name, c.course_name
FROM students s, courses c
WHERE s.course_id = c.course_id;

-- Using JOIN syntax
SELECT s.name, c.course_name  
FROM students s
JOIN courses c ON s.course_id = c.course_id;
\end{lstlisting}

\begin{itemize}
    \item \keyword{Equality Operator}: Uses = to match column values
    \item \keyword{Common Columns}: Tables must have related attributes
    \item \keyword{Result}: Combined data from multiple tables based on matches
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{EJ - Equal Join}
\end{mnemonicbox}

\questionmarks{3(b OR)}{4}{Explain following Aggregate functions. 1) MAX 2) SUM}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{Aggregate Functions}
\begin{tabulary}{\linewidth}{|L|L|L|L|}
\hline
\textbf{Function} & \textbf{Purpose} & \textbf{Syntax} & \textbf{Example} \\ \hline
\textbf{MAX} & Returns maximum value & MAX(column) & MAX(salary) = 50000 \\ \hline
\textbf{SUM} & Returns total of values & SUM(column) & SUM(marks) = 450 \\ \hline
\end{tabulary}
\end{center}

\begin{lstlisting}[language=SQL]
-- MAX examples
SELECT MAX(salary) FROM employees; -- Highest salary
SELECT MAX(age) FROM students; -- Oldest student age

-- SUM examples
SELECT SUM(credits) FROM courses; -- Total credits
SELECT SUM(price * quantity) FROM orders; -- Total order value
\end{lstlisting}

\begin{itemize}
    \item \keyword{Aggregate Functions}: Operate on multiple rows, return single value
    \item \keyword{NULL Handling}: Ignore NULL values in calculations
    \item \keyword{GROUP BY}: Can be used with grouping for category-wise results
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{MS - Maximum Sum}
\end{mnemonicbox}

\questionmarks{3(c OR)}{7}{Write SQL queries for the following table: PRODUCT\_Master: (prod\_no, prod\_name, profit, quantity, sell\_price, cost\_price)}

\begin{solutionbox}
\begin{lstlisting}[language=SQL]
-- 1. Create table PRODUCT_Master
CREATE TABLE PRODUCT_Master (
    prod_no VARCHAR(10) PRIMARY KEY,
    prod_name VARCHAR(50),
    profit NUMBER(10,2),
    quantity NUMBER,
    sell_price NUMBER(10,2),
    cost_price NUMBER(10,2)
);

-- 2. Insert one record in this table
INSERT INTO PRODUCT_Master VALUES 
('P001', 'Laptop', 15000, 10, 45000, 30000);

-- 3. Find product having profit greater than 20000
SELECT * FROM PRODUCT_Master 
WHERE profit > 20000;

-- 4. Delete product having quantity less than 5
DELETE FROM PRODUCT_Master 
WHERE quantity < 5;

-- 5. Add 2% profit in product having sell price greater than 5000
UPDATE PRODUCT_Master 
SET profit = profit * 1.02 
WHERE sell_price > 5000;

-- 6. Add new field total_price to PRODUCT_Master
ALTER TABLE PRODUCT_Master 
ADD total_price NUMBER(10,2);

-- 7. Find product name having no duplicate data
SELECT DISTINCT prod_name FROM PRODUCT_Master;
\end{lstlisting}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{CIDFAUD - Create Insert Delete Find Add Update Distinct}
\end{mnemonicbox}

\questionmarks{4(a)}{3}{Explain fully functional dependency with example.}

\begin{solutionbox}
\textbf{Fully Functional Dependency}: Attribute is fully functionally dependent if it depends on complete primary key, not on partial key.

\textbf{Table:}
\begin{center}
\captionof{table}{Dependency Types}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Dependency Type} & \textbf{Definition} & \textbf{Example} \\ \hline
\textbf{Full FD} & Depends on entire key & (Student\_ID, Course\_ID) $\rightarrow$ Grade \\ \hline
\textbf{Partial FD} & Depends on part of key & (Student\_ID, Course\_ID) $\rightarrow$ Student\_Name \\ \hline
\end{tabulary}
\end{center}

\begin{example}
Example: Student\_Course(Student\_ID, Course\_ID, Student\_Name, Grade)

Full FD: (Student\_ID, Course\_ID) $\rightarrow$ Grade
Partial FD: Student\_ID $\rightarrow$ Student\_Name
\end{example}

\begin{itemize}
    \item \keyword{Complete Key}: All attributes of composite primary key required
    \item \keyword{Non-key Attribute}: Depends on full primary key combination
    \item \keyword{2NF Requirement}: Eliminates partial dependencies
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{FFD - Full Function Dependency}
\end{mnemonicbox}

\questionmarks{4(b)}{4}{Consider following relational schema \& give Relational Algebra Expressions: Employee (Emp\_name, Emp\_id, birth\_date, Post, salary)}

\begin{solutionbox}
\begin{enumerate}
    \item List all Employees having Post="Clerk"
    \begin{center}
    $\sigma_{Post='Clerk'}(Employee)$
    \end{center}
    
    \item Find Emp\_id and Emp\_name having salary > 2000 and post='Manager'
    \begin{center}
    $\pi_{Emp\_id, Emp\_name}(\sigma_{salary>2000 \land Post='Manager'}(Employee))$
    \end{center}
\end{enumerate}

\textbf{Table:}
\begin{center}
\captionof{table}{Relational Algebra Symbols}
\begin{tabulary}{\linewidth}{|C|L|L|}
\hline
\textbf{Symbol} & \textbf{Operation} & \textbf{Purpose} \\ \hline
$\sigma$ & Selection & Filter rows based on condition \\ \hline
$\pi$ & Projection & Select specific columns \\ \hline
$\land$ & AND & Logical conjunction \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Selection ($\sigma$)}: Chooses rows meeting specified conditions
    \item \keyword{Projection ($\pi$)}: Selects required columns from result
    \item \keyword{Combined Operations}: Can use multiple operations together
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SPA - Select Project And}
\end{mnemonicbox}

\questionmarks{4(c)}{7}{What are the criteria of 2NF? Find different functional dependencies and normalize into 2NF.}

\begin{solutionbox}
\textbf{2NF Criteria}:
\begin{itemize}
    \item Must be in 1NF
    \item No partial functional dependencies on primary key
\end{itemize}

\textbf{Given Table}: Student\_Course(Student\_ID, Course\_ID, Student\_Name, Course\_Name)

\textbf{Functional Dependencies}:
\begin{itemize}
    \item Student\_ID $\rightarrow$ Student\_Name (Partial FD)
    \item Course\_ID $\rightarrow$ Course\_Name (Partial FD)
    \item (Student\_ID, Course\_ID) $\rightarrow$ (Student\_Name, Course\_Name) (Full FD)
\end{itemize}

\textbf{2NF Normalization}:

\begin{center}
\begin{tikzpicture}[node distance=2cm, auto, thick]
    % Tables
    \node [gtu block] (Students) {Students\\(Student\_ID, Student\_Name)};
    \node [gtu block, right=4cm of Students] (Courses) {Courses\\(Course\_ID, Course\_Name)};
    \node [gtu block, below right=1.5cm and 1cm of Students] (Enrollment) {Enrollment\\(Student\_ID, Course\_ID)};
    
    % Relationships
    \draw [gtu arrow] (Enrollment) -| node[near start, below] {FK} (Students);
    \draw [gtu arrow] (Enrollment) -| node[near start, below] {FK} (Courses);
\end{tikzpicture}
\captionof{figure}{2NF Decomposition}
\end{center}

\begin{lstlisting}[language=SQL]
-- Table 1: Students
Students(Student_ID, Student_Name)

-- Table 2: Courses  
Courses(Course_ID, Course_Name)

-- Table 3: Enrollment
Enrollment(Student_ID, Course_ID)
\end{lstlisting}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{2NF - Two Normal Form removes partial dependencies}
\end{mnemonicbox}

\questionmarks{4(a OR)}{3}{Explain 3NF with example.}

\begin{solutionbox}
\textbf{3NF (Third Normal Form)}: Table in 2NF with no transitive dependencies on primary key.

\textbf{Table:}
\begin{center}
\captionof{table}{3NF Requirements}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Normal Form} & \textbf{Requirement} & \textbf{Eliminates} \\ \hline
\textbf{3NF} & In 2NF + No transitive dependencies & Transitive FD \\ \hline
\end{tabulary}
\end{center}

\begin{example}
Example: Employee(Emp\_ID, Dept\_ID, Dept\_Name)

Transitive Dependency: Emp\_ID $\rightarrow$ Dept\_ID $\rightarrow$ Dept\_Name

3NF Solution:
Employee(Emp\_ID, Dept\_ID)
Department(Dept\_ID, Dept\_Name)
\end{example}

\begin{itemize}
    \item \keyword{Transitive Dependency}: A $\rightarrow$ B $\rightarrow$ C where A is primary key
    \item \keyword{Non-key to Non-key}: Dependency between non-key attributes
    \item \keyword{Decomposition}: Split table to remove transitive dependencies
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{3NF - Third Normal Form removes Transitive dependencies}
\end{mnemonicbox}

\questionmarks{4(b OR)}{4}{Consider following Relational Schema and give Relational Algebra Expression: Students (Name, SPI, DOB, Enrollment No)}

\begin{solutionbox}
\begin{enumerate}
    \item List all students whose SPI is greater than 7.0
    \begin{center}
    $\sigma_{SPI > 7.0}(Students)$
    \end{center}
    
    \item List name, DOB of student whose enrollment number is 007
    \begin{center}
    $\pi_{Name, DOB}(\sigma_{Enrollment\_No = '007'}(Students))$
    \end{center}
\end{enumerate}

\textbf{Table:}
\begin{center}
\captionof{table}{Relational Algebra Operations}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Query} & \textbf{Relational Algebra} & \textbf{Purpose} \\ \hline
\textbf{Filter} & $\sigma(condition)$ & Select rows \\ \hline
\textbf{Project} & $\pi(attributes)$ & Select columns \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Selection First}: Apply conditions before projection
    \item \keyword{Specific Value}: Use quotes for string literals
    \item \keyword{Column Names}: Exact attribute names required
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{SPI-DOB: Select Project Information - Display Output Better}
\end{mnemonicbox}

\questionmarks{4(c OR)}{7}{What are criteria of 1NF? Normalize given table into 1NF with two different techniques.}

\begin{solutionbox}
\textbf{1NF Criteria}:
\begin{itemize}
    \item Each cell contains single atomic value
    \item No repeating groups or arrays
    \item Each row must be unique
\end{itemize}

\textbf{Given Table}:
\begin{center}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{EnrollmentNo} & \textbf{Name} & \textbf{Subjects} \\ \hline
001 & DEF & Maths,Physics,Chemistry \\ \hline
002 & XYZ & History,Biology,English \\ \hline
\end{tabulary}
\end{center}

\textbf{Technique 1 - Separate Rows}:
\begin{center}
\captionof{table}{1NF - Separate Rows}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{EnrollmentNo} & \textbf{Name} & \textbf{Subject} \\ \hline
001 & DEF & Maths \\ \hline
001 & DEF & Physics \\ \hline
001 & DEF & Chemistry \\ \hline
002 & XYZ & History \\ \hline
002 & XYZ & Biology \\ \hline
002 & XYZ & English \\ \hline
\end{tabulary}
\end{center}

\textbf{Technique 2 - Separate Tables}:
\begin{lstlisting}[language=SQL]
-- Students Table
Students(EnrollmentNo, Name)

-- Subjects Table  
Subjects(SubjectID, SubjectName)

-- Student_Subjects Table
Student_Subjects(EnrollmentNo, SubjectID)
\end{lstlisting}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{1NF - One Normal Form creates Atomic values}
\end{mnemonicbox}

\questionmarks{5(a)}{3}{Explain ACID properties of transaction.}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{ACID Properties}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Property} & \textbf{Description} & \textbf{Purpose} \\ \hline
\textbf{Atomicity} & All or nothing execution & Transaction completeness \\ \hline
\textbf{Consistency} & Database remains valid & Data integrity \\ \hline
\textbf{Isolation} & Concurrent transactions independent & Avoid interference \\ \hline
\textbf{Durability} & Committed changes permanent & Data persistence \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Atomicity}: Transaction executes completely or not at all
    \item \keyword{Consistency}: Database constraints maintained before/after transaction
    \item \keyword{Isolation}: Transactions don't interfere with each other
    \item \keyword{Durability}: Once committed, changes survive system failures
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{ACID - All Consistent Isolated Durable}
\end{mnemonicbox}

\questionmarks{5(b)}{4}{Create following table with specification: STUDENT: (stu\_id, stu\_name, Address, City, contact\_no, Branch\_name)}

\begin{solutionbox}
\begin{lstlisting}[language=SQL]
CREATE TABLE STUDENT (
    stu_id VARCHAR(10) PRIMARY KEY,
    stu_name VARCHAR(50) NOT NULL,
    Address VARCHAR(100),
    City VARCHAR(30),
    contact_no NUMBER(10),
    Branch_name VARCHAR(20) CHECK (Branch_name IN ('IT', 'Computer', 'Electrical', 'Civil'))
);
\end{lstlisting}

\textbf{Table:}
\begin{center}
\captionof{table}{Table Constraints}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Constraint} & \textbf{Purpose} & \textbf{Implementation} \\ \hline
\textbf{NOT NULL} & Mandatory field & stu\_name NOT NULL \\ \hline
\textbf{CHECK} & Value validation & Branch\_name IN (...) \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Primary Key}: stu\_id uniquely identifies each student
    \item \keyword{NOT NULL}: stu\_name cannot be empty
    \item \keyword{CHECK Constraint}: Branch\_name limited to specified values
    \item \keyword{Data Types}: Appropriate sizes for each field
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{CNPD - Constraints Names Primary Datatypes}
\end{mnemonicbox}

\questionmarks{5(c)}{7}{What is trigger? Write syntax to create trigger in oracle. Create simple trigger.}

\begin{solutionbox}
\textbf{Trigger}: Special stored procedure that automatically executes in response to database events.

\textbf{Oracle Trigger Syntax}:
\begin{lstlisting}[language=SQL]
CREATE [OR REPLACE] TRIGGER trigger_name
{BEFORE | AFTER | INSTEAD OF} {INSERT | UPDATE | DELETE}
ON table_name
[FOR EACH ROW]
[WHEN condition]
DECLARE
    -- Variable declarations
BEGIN
    -- Trigger logic
END;
\end{lstlisting}

\textbf{Simple Trigger Example}:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER display_student_trigger
BEFORE INSERT ON STUDENT
FOR EACH ROW
BEGIN
    DBMS_OUTPUT.PUT_LINE('Inserting student: ' || :NEW.stu_name || 
                        ' with ID: ' || :NEW.stu_id);
END;
\end{lstlisting}

\textbf{Table:}
\begin{center}
\captionof{table}{Trigger Types}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Trigger Type} & \textbf{When Executed} & \textbf{Purpose} \\ \hline
\textbf{BEFORE} & Before DML operation & Validation, modification \\ \hline
\textbf{AFTER} & After DML operation & Logging, auditing \\ \hline
\textbf{FOR EACH ROW} & Row-level trigger & Per row execution \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{:NEW}: References new values being inserted/updated
    \item \keyword{:OLD}: References old values being deleted/updated
    \item \keyword{Automatic Execution}: Fires automatically on specified events
    \item \keyword{Business Logic}: Enforces complex business rules
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{TBA-FEN - Triggers Before After For Each New}
\end{mnemonicbox}

\questionmarks{5(a OR)}{3}{Explain problems of concurrency control in transaction.}

\begin{solutionbox}
\textbf{Table:}
\begin{center}
\captionof{table}{Concurrency Control Problems}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Problem} & \textbf{Description} & \textbf{Example} \\ \hline
\textbf{Lost Update} & One transaction overwrites another's changes & T1, T2 update same record \\ \hline
\textbf{Dirty Read} & Reading uncommitted data & T1 reads T2's uncommitted changes \\ \hline
\textbf{Unrepeatable Read} & Same query returns different results & T1 reads, T2 updates, T1 reads again \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Phantom Read}: New rows appear between queries in same transaction
    \item \keyword{Deadlock}: Two transactions wait for each other's locks
    \item \keyword{Inconsistent Analysis}: Reading data while it's being modified
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{LDU-PID - Lost Dirty Unrepeatable Phantom Inconsistent Deadlock}
\end{mnemonicbox}

\questionmarks{5(b OR)}{4}{Create following table with specification: STUDENT: (stu\_id, stu\_name, Address, City, contact\_no, Branch\_name)}

\begin{solutionbox}
\begin{lstlisting}[language=SQL]
CREATE TABLE STUDENT (
    stu_id VARCHAR(10) PRIMARY KEY CHECK (stu_id LIKE 'S%'),
    stu_name VARCHAR(50),
    Address VARCHAR(100),
    City VARCHAR(30),
    contact_no NUMBER(10),
    Branch_name VARCHAR(20)
);
\end{lstlisting}

\textbf{Table:}
\begin{center}
\captionof{table}{Constraints Table}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Constraint} & \textbf{Implementation} & \textbf{Purpose} \\ \hline
\textbf{PRIMARY KEY} & stu\_id PRIMARY KEY & Unique identification \\ \hline
\textbf{CHECK} & stu\_id LIKE 'S\%' & Must start with 'S' \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Primary Key}: stu\_id serves as unique identifier
    \item \keyword{Pattern Check}: stu\_id must begin with letter 'S'
    \item \keyword{Data Types}: Appropriate field sizes and types
    \item \keyword{Constraint Validation}: Database enforces rules automatically
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{PKC-ST - Primary Key Check Starts}
\end{mnemonicbox}

\questionmarks{5(c OR)}{7}{What is Explicit cursor? Explain explicit cursor with simple example.}

\begin{solutionbox}
\textbf{Explicit Cursor}: User-defined cursor for handling SELECT statements that return multiple rows with programmatic control.

\textbf{Cursor Operations}:

\begin{center}
\begin{tikzpicture}[node distance=1.5cm, auto, thick]
    \node [gtu state] (Dec) {DECLARE Cursor};
    \node [gtu state, right=1.5cm of Dec] (Open) {OPEN Cursor};
    \node [gtu state, right=1.5cm of Open] (Fetch) {FETCH Data};
    \node [gtu decision, display, below=1cm of Fetch] (Check) {More Rows?};
    \node [gtu state, left=1.5cm of Check] (Close) {CLOSE Cursor};
    
    \draw [gtu arrow] (Dec) -- (Open);
    \draw [gtu arrow] (Open) -- (Fetch);
    \draw [gtu arrow] (Fetch) -- (Check);
    \draw [gtu arrow] (Check) -- node[right] {Yes} (Fetch.south);
    \draw [gtu arrow] (Check) -- node[above] {No} (Close);
\end{tikzpicture}
\captionof{figure}{Explicit Cursor Lifecycle}
\end{center}

\begin{lstlisting}[language=SQL]
-- Declaration
DECLARE
    CURSOR student_cursor IS
        SELECT stu_id, stu_name FROM STUDENT WHERE city = 'Ahmedabad';
    v_id STUDENT.stu_id%TYPE;
    v_name STUDENT.stu_name%TYPE;
BEGIN
    -- Open cursor
    OPEN student_cursor;
    
    -- Fetch data
    LOOP
        FETCH student_cursor INTO v_id, v_name;
        EXIT WHEN student_cursor%NOTFOUND;
        
        DBMS_OUTPUT.PUT_LINE('ID: ' || v_id || ', Name: ' || v_name);
    END LOOP;
    
    -- Close cursor
    CLOSE student_cursor;
END;
\end{lstlisting}

\textbf{Table:}
\begin{center}
\captionof{table}{Cursor Commands}
\begin{tabulary}{\linewidth}{|L|L|L|}
\hline
\textbf{Operation} & \textbf{Purpose} & \textbf{Syntax} \\ \hline
\textbf{DECLARE} & Define cursor & CURSOR name IS SELECT... \\ \hline
\textbf{OPEN} & Initialize cursor & OPEN cursor\_name \\ \hline
\textbf{FETCH} & Retrieve data & FETCH cursor INTO variables \\ \hline
\textbf{CLOSE} & Release resources & CLOSE cursor\_name \\ \hline
\end{tabulary}
\end{center}

\begin{itemize}
    \item \keyword{Manual Control}: Programmer controls cursor operations
    \item \keyword{Memory Management}: Must explicitly open and close
    \item \keyword{Loop Processing}: Typically used with loops for multiple rows
    \item \keyword{Cursor Attributes}: \%FOUND, \%NOTFOUND, \%ROWCOUNT
\end{itemize}
\end{solutionbox}

\begin{mnemonicbox}
\mnemonic{DOFC - Declare Open Fetch Close}
\end{mnemonicbox}

\end{document}
